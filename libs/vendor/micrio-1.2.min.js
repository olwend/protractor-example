/* Micrio.min.js, Rd5ba71571b27f699dc6cf6fa43c47cbeb9c74463/1503069254+logo toolbar popover markers markers.tour viewer tour audio audio.locations audio.playlist children 360 omaps
 * Copyright (C) Q42 Internet B.V. - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Marcel Duin <marcel@q42.nl>, 2015 - 2017
 */
function u(g){return function(){return this[g]}}
(function(g,h){function c(a){this.data=a;this.id=a.id||"";this.isMap=0<a.mapType;this.pg=a.mapType;this.ua=!a.path&&!a.id;this.width=a.width;this.height=a.height;this.lang=a.lang||"en";this.Mf=[];this.rb=this.width;this.qb=this.height;this.path=a.path||this.basePath;this.tc=this.baseCdn||this.path;this.type=a.type;this.ra=a.tileSize||this.tileSize;this.Kb=!1!==a.hookEvents;this.Bc="cover"==a.initType;this.If=!1!==a.autoInit;this.kb=!a.noLevel0&&1||0;this.Lh=a.levelLimit||Infinity;this.Mh=!0==a.limitToCoverScale;
this.dh=a.doubleClickZoomOut;this.ni=!0==a.miniMap;this.Nc=!1!==a.loaderBar&&!this.ua;this.jf=!0==a.fullscreen;this.Fg=!0==a.trackState;this.Kc=a.startCoo instanceof Array&&a.startCoo;this.startView=this.$e=a.view instanceof Array&&4==a.view.length&&a.view;this.mh=!0===a.freeMove;this.parent=a.parent;this.Pc=a.watchScale;this.Ca=!1===a.zoomLimit&&Infinity||a.zoomLimit||1;this.language=a.language||this.defaultLanguage||"en";this.version=this.version;this.clearRect=!0!==a.noClearRect;this.yg=a.scrollSensitivity||
1;this.Y=a.restrict||[0,0,1,1];this.t=!0==a.is360;this.Oh=!0==a.meta;"file:"==location.protocol&&("//"==this.path.substr(0,2)&&(this.path="https:"+this.path),"//"==this.tc.substr(0,2)&&(this.tc="https:"+this.tc));a.social||a.fullscreen||(a.controlType="none");this.og=navigator.s.ie||navigator.s.firefox||navigator.s.safari;this.eh=1/6;this.Vf=0;this.opacity=1;this.Id=this.t&&0.18||0.5;this.F=null;this.L=[];this.W=[];this.rd=this.qa=this.Vb=!1;this.ug=0;this.thumbSrc=this.Dg=this.aspect=this.Yc=this.camera=
this.c=this.ratio=this.nb=this.j=this.J=null;this.Cc=!a.noLogo&&c.Wd&&new c.Wd(this);this.be=null;this.b={Ci:!1,Fe:!1,ud:!1,La:[],Fb:[],L:[],Xb:[],sd:[],fb:[],Nb:[],now:performance.now(),Id:1,Od:1};this.i=this.data.canvas instanceof Element&&this.data.canvas;this.container=this.d=this.data.container||this.i&&this.i.parentNode||h.body;this.d.classList.add("micrio-container");this.d.micrio=this;this.d.R=this.d.offsetWidth;this.d.Z=this.d.offsetHeight;this.d.rb=this.d.R;this.d.qb=this.d.Z;this.ua?this.el=
this.i=this.d:(this.el=this.i=this.i||h.createElement("canvas"),this.i.classList.add("micrio"),this.i.micrio=this);this.i.offset={top:0,left:0};this.qd=this.qd.bind(this);this.show=this.show.bind(this);this.V=this.V.bind(this);this.Le=!this.ua&&(!this.width||!this.height);this.Ce=!this.Le;this.Le?this.th():this.Oh?this.getMetadata():(this.data.social&&this.Ub(),this.ec())}function v(a){var b="",d;for(d in x)b+=a.replace(/\$/,x[d]);return b}function s(a,b,d,c){var f=3*a,n=3*(d-a)-f,h=1-f-n,g=3*b,k=
3*(c-b)-g,z=1-g-k;return function(a){for(var b=a,d=0,c;5>d;){c=b*(f+b*(n+b*h))-a;if(0.001>Math.abs(c))break;b-=c/(f+b*(2*n+3*h*b));d++}a=b;return a*(g+a*(k+a*z))}}c.prototype={basePath:"//b.micr.io/",tileSize:512,version:1.2,th:function(){c.Da.Xf(this.path+this.id+"/info.json",function(a){this.Ce=!0;(this.isMap=0<a.MapType)&&c.Ib&&(a.Width=c.Ib.prototype.pi,a.Height=c.Ib.prototype.oi,this.pg=a.MapType,this.ua=!0,this.Nc=!1);this.width=a.Width;this.height=a.Height;this.t||(this.t=!(!a.Is360||!c.F));
this.t&&!g.THREE&&(console.error("Please include a three.js reference in your document."),this.t=!1);a.StartView&&(this.startView=this.$e=a.StartView.split(",").map(function(a){return Number(a)}));a.Cultures&&(this.Mf=a.Cultures.split(","));!0!=this.data.skipMeta?0<=this.Mf.indexOf(this.lang)?this.getMetadata():(this.d.dispatchEvent(new m("metadata",{detail:this})),this.data.social&&this.Ub(),this.ec()):(this.data.social&&this.Ub(),this.ec())}.bind(this),function(){c.Da.get(this.path+"info/"+this.id,
function(a){this.Ce=!0;this.id=a[0];this.width=parseInt(a[1]);this.height=parseInt(a[2]);this.ec()}.bind(this),function(a){console.warn("Error!",a)},null,null,!0)}.bind(this))},getMetadata:function(){c.Da.Xf(this.path+this.id+"/data."+this.lang+".json",function(a){this.Ub(a);this.ec();this.lg(a)}.bind(this),function(){console.warn("Micrio data."+this.lang+".json not found");this.Ub();this.ec()}.bind(this))},Ub:function(a){if("none"!=this.data.controlType&&c.Na){if(this.J)return this.J.cb(a);this.D&&
this.D.viewer?(this.J=this.D.viewer,this.J.cb(a,this)):this.viewer=this.J=new c.Na(this,a)}},lg:function(a){if(!a)return this.d.dispatchEvent(new m("metadata",{detail:this}));this.Ub(a);this.qg&&a.maps&&this.qg.cb(a.maps);c.u&&a.audio&&(this.audio=this.w=new c.u(this,a.audio));c.o&&a.markers&&(this.markers=this.q=new c.o(this,a.markers),c.o.K&&a.markerTours&&(this.markerTours=this.He=a.markerTours.map(function(a){return new c.o.K(this.q,a)}.bind(this))));c.K&&a.tours&&(this.tours=this.gf=a.tours.map(function(a){return new c.K(this,
a)}.bind(this)));c.Vd&&a.children&&(this.children=this.children=new c.Vd(this,a.children));this.d.dispatchEvent(new m("metadata",{detail:this}))},ec:function(){this.isMap&&c.Ib&&(this.qg=new c.Ib(this));this.aspect=this.Yc=this.width/this.height;this.ratio=this.nb=g.devicePixelRatioIEMobile||!this.data.noRetina&&g.devicePixelRatio&&Math.min(2,g.devicePixelRatio)||1;this.rb=this.width;this.qb=this.height;if(!this.ua){for(var a=this.ra;a<Math.max(this.width,this.height);a*=2,this.kb++);this.j=this.i.getContext(this.t&&
"3d"||"2d");this.i.parentNode&&this.d==this.i.parentNode||this.d.appendChild(this.i);this.Nc&&(this.he=h.createElement("loaderbar"));this.thumbSrc=this.Dg=this.data.thumbSrc||this.tc+this.id+"/"+(this.kb-1)+"/0-0.jpg";this.t&&c.F&&(this.F=new c.F(this))}this.camera=this.c=new c.e(this);this.d.dispatchEvent(new m("preset",{detail:this}));this.If&&this.M()},M:function(){if(!this.Vb){this.Vb=!0;if(!this.ua){for(var a=0;a<this.kb;a++)this.L.push(new c.jc(this,a));for(a=this.kb-1;0<=a;a--)this.L[a].ki=
a<this.kb-1&&this.L[a+1].ki+this.L[a+1].Rh||0}this.D||this.c.M();return this.show()}},show:function(){if(this.Le&&!this.Ce){this.If=!0;var a=this;return new Promise(function(b,d){a.d.addEventListener("load",b.bind(this));d&&a.d.addEventListener("error",d.bind(this))})}if(!this.Vb)return this.M();if(this.qa)return new Promise(function(a,d){d&&d("Already shown")});this.qa=!0;this.D||(this.ua||this.i.parentNode||this.d.appendChild(this.i),this.c.start(),this.c.oa(),this.Cc&&this.Cc.pa(),this.J?(this.J.toolbar&&
this.jf&&this.J.toolbar.Hf().appendChild(this.c.tb),this.J.pa()):this.jf&&(this.c.tb.classList.add("stand-alone"),this.d.appendChild(this.c.tb)));this.Nc&&this.d.appendChild(this.he);this.Wg=new Promise(function(a,d){this.rd?a.bind(this)():(this.d.addEventListener("load",a.bind(this)),d&&this.d.addEventListener("error",d.bind(this)))}.bind(this));this.ua&&setTimeout(this.Qf.bind(this));this.d.dispatchEvent(new m("show",{}));return this.Wg},V:function(){this.qa&&(this.qa=!1,this.ua||this.d.removeChild(this.i),
this.Cc&&this.Cc.remove(),this.Nc&&this.d.removeChild(this.he),this.jf&&this.c.tb.parentNode&&this.d.removeChild(this.c.tb),this.J&&this.J.remove(),this.parent&&this.parent.d.removeEventListener("move",this.Oi),this.c.stop(),this.c.sa(),this.d.dispatchEvent(new m("hide",{})))},Ye:function(a){this.D?this.G&&this.D.Ye(Math.max(this.width/(this.G[2]-this.G[0]),this.height/(this.G[3]-this.G[1]))/Math.max(this.D.width,this.D.height)/a):a>this.Ca&&(this.Ca=a)},l:function(){if(!this.ua){var a=this.b.fb.concat([]);
this.b.gg=!1;this.b.Fe=!1;this.b.ud=!1;this.b.L.length=0;this.b.La.length=0;this.b.Fb.length=0;this.b.Xb.length=0;this.b.sd.length=0;this.b.fb.length=0;this.b.Nb.length=0;this.b.now=performance.now();this.b.Id=this.Id*(this.c.ea.S&&1.25||1);this.b.Od=this.eh*(this.c.ea.S&&0.5||1);for(var b=0;b<this.L.length;b++)this.L[b].b.scale>=this.b.Id/this.nb&&this.kb-this.L[b].od<this.Lh&&this.b.L.push(this.L[b]);isNaN(this.Kh)||(this.b.L=[this.L[this.Kh]]);if(this.t||!(this.c.I[2]<=this.c.I[0]||this.c.I[3]<=
this.c.I[1])){for(b=0;b<this.b.L.length;b++)if(this.b.Xb=this.t?this.b.L[b].Bh():this.b.L[b].yc(),this.b.sd=this.vh(this.b.Xb),this.b.fb=this.b.fb.concat(this.b.Xb),this.b.La=this.b.La.concat(this.b.sd),this.b.Fb=this.b.Fb.concat(this.Ah(this.b.Xb)),this.Fh(this.b.sd).length==this.b.Xb.length){this.b.gg=0==b;break}this.t&&(this.b.La.unshift(this.L[this.L.length-1].Nd[0]),this.b.fb.unshift(this.L[this.L.length-1].Nd[0]));this.b.La.reverse();this.b.Fb.reverse();this.b.ud=!1;for(b=0;b<this.b.La.length;b++)this.b.La[b].xe?
this.b.La[b].l(this.b.now):(this.b.ud||this.b.La[b].l(this.b.now),this.b.ud=!0),1>this.b.La[b].opacity&&(this.b.Fe=!0);this.Vf++;if(1<=this.b.Od)for(b=0;b<this.b.Od&&b<this.b.Fb.length;b++)this.b.Fb[b].load();else 0==this.Vf%(1/this.b.Od)&&this.b.Fb.length&&this.b.Fb[0].load();this.b.Nb=this.cg(this.W,this.b.fb);for(b=0;b<this.b.Nb.length;b++)this.b.Nb[b].Nh();if(this.t)for(this.b.Nb=this.cg(a,this.b.fb),b=0;b<this.b.Nb.length;b++)this.b.Nb[b].remove();!this.b.gg||this.b.Fe?this.c.la():this.rd||this.Qf();
this.Nc&&this.ug!=this.b.La.length/this.b.fb.length&&(this.he.style.width=100*(this.ug=this.b.La.length/this.b.fb.length)+"%")}}},vh:function(a){for(var b=[],d=0;d<a.length;d++)a[d]&&a[d].loaded&&b.push(a[d]);return b},Ah:function(a){for(var b=[],d=0;d<a.length;d++)!a[d]||(a[d].src||a[d].W)||b.push(a[d]);return b},Fh:function(a){for(var b=[],d=0;d<a.length;d++)1==a[d].opacity&&a[d].xe&&b.push(a[d]);return b},cg:function(a,b){for(var d=[],c=0;c<a.length;c++)-1==b.indexOf(a[c])&&d.push(a[c]);return d},
Qf:function(){this.rd=!0;this.d.classList.add("loaded");this.d.dispatchEvent(new m("load",{detail:this}))},Zg:function(a){this.W.push(a);1==this.W.length&&this.qd()},loaded:function(a){for(var b=0;b<this.W.length;b++)if(this.W[b]==a){this.W.splice(b,1);break}cancelAnimationFrame(this.be);this.be=requestAnimationFrame(this.qd)},qd:function(){if(this.W.length)for(var a=this.D&&2||4,b=1;b<a;b++)this.W[this.W.length-b]&&this.W[this.W.length-b].De()}};g.Micrio=c;c.prototype.show=c.prototype.show;c.prototype.hide=
c.prototype.V;c.prototype.initMeta=c.prototype.lg;c.prototype.setZoomLimit=c.prototype.Ye;c.jc=function(a,b){this.a=a;this.od=b;this.n=this.scale=Math.pow(2,b);this.Nd=[];this.Ee=[];this.b={scale:1,$:[0,0,0,0]};this.ra=a.ra*this.scale;this.Rb=[Math.ceil(a.width/this.ra),Math.ceil(a.height/this.ra)];this.Rh=this.Rb[0]*this.Rb[1];this.gc=[this.ra/this.a.width,this.ra/this.a.height]};c.jc.prototype={yc:function(a){this.Ee.length=0;a=a||this.a.c.oe;this.n=this.scale*this.a.c.n;this.b.$[0]=Math.max(0,
Math.min(this.Rb[0],Math.floor(a[0]/this.gc[0])));this.b.$[1]=Math.max(0,Math.min(this.Rb[0],Math.ceil(a[2]/this.gc[0])));this.b.$[2]=Math.max(0,Math.floor(a[1]/this.gc[1]));this.b.$[3]=Math.max(0,Math.floor(a[3]/this.gc[1]));for(var b=a=0;this.b.$[2]-1<this.b.$[3]&&this.b.$[2]<this.Rb[1];this.b.$[2]++)for(b=this.b.$[0],a=this.Rb[0]*this.b.$[2];b<this.b.$[1];b++)this.Ee.push(this.Nd[a+b]||(this.Nd[a+b]=new c.jc.qf(this,b,this.b.$[2])));return this.Ee},Bh:function(){if(this.od==this.a.kb-1)return this.yc([0,
0,1,1]);var a=this.a.c.oe;if(a[0]>a[2]){var b=Math.min(a[1],a[3]),d=Math.max(a[1],a[3]);return[].concat(this.yc([a[0],b,1,d])).concat(this.yc([0,b,a[2],d]))}return this.yc()}};c.jc.qf=function(a,b,d){this.k=a;this.x=b;this.y=d;this.src=null;this.height=this.width=0;this.error=this.xe=this.le=this.loaded=this.jd=this.W=!1;this.opacity=this.P=0;this.Gc=!1;this.da=this.lb=this.bf=this.Ab=null;this.Lg=b*this.k.a.ra;this.si=d*this.k.a.ra;this.Kg=(this.k.ra+Math.min(0,this.k.a.width-(this.x+1)*this.k.ra))/
this.k.scale;this.Eh=(this.k.ra+Math.min(0,this.k.a.height-(this.y+1)*this.k.ra))/this.k.scale;this.ya=null;this.De=this.De.bind(this)};c.jc.qf.prototype={load:function(){this.W||(this.W=!0,this.ya||(this.ya=new Image,this.k.a.t&&(this.ya.crossOrigin="anonymous"),this.ya.onload=this.onload.bind(this),this.ya.onerror=this.onerror.bind(this)),this.k.a.Zg(this))},De:function(){if(this.error||this.jd)return!1;this.jd=!0;this.src=this.ya.src=this.k.a.tc+this.k.a.id+"/"+this.k.od+"/"+this.x+"-"+this.y+
".jpg"},onload:function(){this.width=this.ya.naturalWidth||this.ya.height;this.height=this.ya.naturalHeight||this.ya.width;this.loaded=!0;this.P=performance.now();this.k.a.t&&this.k.a.F&&this.k.a.F.bi(this);this.md()},md:function(){this.k.a.loaded(this)},onerror:function(){this.le||(this.error=!0,this.loaded=this.W=this.jd=!1,this.md());this.le=!1},Nh:function(){this.src=this.ya.src="";this.le=!0;this.loaded=this.W=this.jd=!1;this.md()},l:function(a,b,d,c){this.loaded&&!this.error&&(this.xe=!0,b=
this.k.n,d=this.k.a.c.offset,c=this.k.a.og||0!=this.k.a.c.rotation,1>this.opacity&&(this.opacity=Math.min(1,(a-this.P)/250)),this.k.a.t?this.lb.opacity=this.opacity:this.k.a.j.globalAlpha=this.opacity*this.k.a.opacity,this.k.a.t?this.Gc||this.pa():this.k.a.j.drawImage(this.ya,this.Lg*b-d[0],this.si*b-d[1],c&&this.width*b+1||this.width*b,c&&this.height*b+1||this.height*b))},pa:function(){this.loaded&&!this.Gc&&(this.Gc=!0,this.P=performance.now(),this.lb.visible=!0)},remove:function(){this.Gc&&(this.Gc=
!1,this.lb.visible=!1,this.md())}};var k=h.createElement("style"),x=["-webkit-","-moz-","-ms-",""];k.textContent=".micrio-container{"+v("$perspective:800px;")+v("$user-select:none;")+"-ms-content-zooming:none;-ms-touch-action:none;touch-action:none;overflow:hidden;position:relative;backface-visibility:hidden;}.micrio-container.hooked{cursor:move;"+v("cursor:$grab;")+"}.micrio-container.dragging{"+v("cursor:$grabbing;")+'}.micrio-container loaderbar{position:absolute;display:block;left:0;top:0;height:2px;background:rgba(255,255,255,.75);pointer-events:none;transition:opacity .25s ease, width .25s ease;z-index:8;}.micrio-container loaderbar[style="width: 100%;"]{opacity:0;}.micrio-container.fullscreen{width:100vw !important;height:100vh !important;}micrio[id]{display: block;}';
h.head.appendChild(k);Math.Ed=Math.pyth=function(a,b){return Math.sqrt(a*a+b*b)};Math.rotate=function(a,b,d,c,f){f=-f*Math.PI/180;d/=2;c/=2;a-=d;var n=b-c;b=Math.sqrt(a*a+n*n);f=Math.atan2(n,a)+f;return{x:Math.cos(f)*b+d,y:Math.sin(f)*b+c}};k=navigator.userAgent.toLowerCase();navigator.s={};navigator.s.webkit=/applewebkit/.test(k);navigator.s.firefox=/firefox/.test(k);navigator.s.safari=/safari/.test(k)&&!/chrome/.test(k);navigator.s.ie=/msie/.test(k)||/trident/.test(k)||/edge\//.test(k);navigator.s.iemobile=
/iemobile/.test(k);navigator.s.iOS=/ipad|iphone|ipod/.test(k);navigator.s.iOS10=/iphone\ os\ 10/.test(k);navigator.s.OSX=/macintosh/.test(k)&&/os\ x/.test(k);navigator.s.android=/android/.test(k);navigator.s.ie9=navigator.s.ie&&/ie 9/.test(k);navigator.s.iPad=/ipad/.test(k);navigator.s.mobile=navigator.s.iOS||navigator.s.android||navigator.s.iemobile;navigator.s.unknown=!navigator.s.webkit&&!navigator.s.firefox&&!navigator.s.ie&&!navigator.s.iOS&&!navigator.s.android;var p={};p.transform="webkitTransform"in
h.documentElement.style?"webkitTransform":"mozTransform"in h.documentElement.style?"mozTransform":"msTransform"in h.documentElement.style?"msTransform":"transform";p.translate3d=navigator.s.ie9?["translate(",")"]:["translate3d(",",0)"];p.scale3d=navigator.s.ie9?["scale(",")"]:["scale3d(",",1)"];p.trans=p.Ni=function(a,b,d){return navigator.s.ie9?"translate("+a+","+b+")":"translate3d("+a+"px,"+b+"px,"+(d||0)+"px)"};p.scale=p.scale=function(a){return navigator.s.ie9?"scale("+a+","+a+")":"scale3d("+
a+","+a+",1)"};p.rotateZ=p.Ki=function(a){return navigator.s.ie9?"rotateZ("+a+"deg)":"rotate3d(0,0,1,"+a+"deg)"};g.CSS=p;navigator.browser=navigator.s;navigator.s.iemobile&&(g.xi=Math.round(g.screen.availWidth/h.documentElement.clientWidth));c.Utils=c.v={Lf:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},Gi:function(a,b){b=Math.pow(10,b||1);a=Math.round(a*b)/b;return 10>a&&"0"+a||a},m:function(a,b,
d,c,f,n){a=h.createElement(a);b&&(a.className=b);c&&(a.textContent=c);f&&(a.innerHTML=f);d instanceof Element&&d.appendChild(a);if(n)for(var g in n)a.setAttribute(g,n[g]);return a},yh:function(a){for(var b=0,d=c.prototype.tileSize;d<Math.max(a.width,a.height);d*=2,b++);return c.prototype.basePath+(a.shortId||a.id)+"/"+b+"/0-0.jpg"},Vh:function(a){a=[0,0,Math.round(a)];for(var b in"21")for(;60<=a[2-b]&&(a[2-b]-=60,++a[1-b]););return(a[0]&&a[0]+":")+(a[0]&&10>a[1]&&"0"+a[1]||a[1])+":"+(10>a[2]&&"0"+
a[2]||a[2])},Mi:function(a){a=a.replace(/^\s+|\s+$/g,"");a=a.toLowerCase();for(var b=0;30>b;b++)a=a.replace(RegExp("\u00e3\u00e0\u00e1\u00e4\u00e2\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u00f5\u00f2\u00f3\u00f6\u00f4\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u00b7/_,:;".charAt(b),"g"),"aaaaaeeeeiiiiooooouuuunc------".charAt(b));return a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}};c.v.createGUID=c.v.Lf;c.v.newEl=c.v.m;c.v.getThumbSrc=c.v.yh;if(navigator.userAgent&&(k=navigator.userAgent.toLowerCase(),
/msie/.test(k)||/rv\:11\.0/.test(k)||!g.vi)){var m=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var d=h.createEvent("CustomEvent");d.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return d};m.prototype=g.CustomEvent&&g.CustomEvent.prototype||g.Event.prototype;g.CustomEvent=m}var q=!1;if(!navigator.s.iOS10)try{var t=Object.defineProperty({},"passive",{get:function(){q=!0}});g.addEventListener("test",null,t)}catch(A){}var l=q?{passive:!0}:!1,y=q?{passive:!0,capture:!0}:!0;c.Camera=
c.e=function(a){this.a=a;this.offset=[0,0];this.rotation=0;this.ka=this.wb=1;this.Se();this.n=a.Bc?this.wb:this.ka;this.paused=!1;this.initScale=this.kd=this.n;this.Mb=this.$a=!1;this.I=null;this.ba=[0,0,0];this.tg="";this.Tf=0;this.Ve=!0;this.Sb=!1;this.vd=[];this.ih=1/(a.data.cameraSpeed||1);this.tb=h.createElement("button");this.tb.className="fullscreen fa fa-arrows-alt";this.tb.title="Toggle fullscreen";this.ani=this.ea=null;this.ca={};this.ye=!1;this.zf=this.tf=this.Bf=this.be=this.na=this.minimap=
this.Ia=this.events=this.r=null;this.rf={bd:1};this.l=this.l.bind(this);this.la=this.la.bind(this);this.reset=this.reset.bind(this);this.eg=this.eg.bind(this);this.ed=this.ed.bind(this);this.fd=this.fd.bind(this);this.onresize=this.onresize.bind(this);this.ac=this.ac.bind(this);this.hc=this.hc.bind(this);this.ic=this.ic.bind(this)};c.e.prototype={M:function(){c.e.Q&&(this.events=this.r=new c.e.Q(this));c.e.Xd&&this.a.ni&&(this.minimap=this.Ia=new c.e.Xd(this));this.ani=this.ea=new c.e.lf;this.Wf();
this.ac()},start:function(){this.a.$e?this.Jc(this.a.$e):this.a.Kc&&3==this.a.Kc.length?(this.ma(this.a.Kc[2]),this.Ja(this.a.Kc)):this.r&&(this.ma(this.n),this.a.Bc?this.Ja(this.a.Kc||[0.5,0.5]):this.Aa(0,0));this.ac()},stop:function(){this.ea&&this.ea.stop();this.paused=!1;this.r&&this.r.stop()},pause:function(){this.ea&&this.ea.pause()},Ue:function(){this.ea&&this.ea.Ue()},oa:function(){this.r&&this.a.Kb&&this.r.oa();addEventListener("resize",this.onresize);this.a.O&&(this.tf=setInterval(this.la,
2E3))},sa:function(){this.r&&this.r.sa();removeEventListener("resize",this.onresize);h.removeEventListener(this.ca.onchange,this.ed);clearInterval(this.tf)},dd:function(a,b,d,e,f,n,g){1!=this.a.Ca&&(n=!0);return this.zb((new c.e.Hb(this.a,a,b,d)).Pd(void 0,!n),e,f,g,n)},qh:u("Tf"),zb:function(a,b,d,e,f,n){if(this.a.D&&this.a.G)return n=[this.a.G[2]-this.a.G[0],this.a.G[3]-this.a.G[1]],this.a.D.c.zb([this.a.G[0]+a[0]*n[0],this.a.G[1]+a[1]*n[1],this.a.G[2]-(1-a[2])*n[0],this.a.G[3]-(1-a[3])*n[1]],b,
d,e,f);1>this.a.Ca&&(f=!0);a instanceof Array&&(a=new c.e.sb(this.a,a));if(isNaN(b)||null===b)b=2500*this.wc(a)*(d||this.ih);var g=this.Tb(!0);a=this.ea.add(g,a.$,b,function(a){this.Tf=a;this.Jc(g,!0,f)}.bind(this),e||r.ad,"cam");return n?b:a},kh:function(a,b){return this.dd(0.5,0.5,this.a.c.ka,a,b)},jh:function(a,b){return this.dd(0.5,0.5,this.a.c.wb,a,b)},Jh:function(){return this.n==this.ka},wh:u("ka"),nh:u("wb"),reset:function(){this.ma(this.kd);this.Ja([0.5,0.5])},wc:function(a){a instanceof
c.e.sb&&(a=a.$);var b=this.gd([a[0]+(a[2]-a[0])/2,a[1]+(a[3]-a[1])/2],!0),d=this.a.d.getClientRects()[0],e=[d.left+d.width/2,d.top+d.height/2],b=Math.Ed(b[0]-e[0],b[1]-e[1])/Math.max(d.width,d.height);return 0==Math.round(1E5*b)/1E5?0:Math.min(2,Math.Ed(b,Math.max((this.I[2]-this.I[0])/(a[2]-a[0]),(this.I[3]-this.I[1])/(a[3]-a[1]))/3)/2)},ja:function(a,b,d){if(this.a.ua||this.a.t)d=!0;b&&(b=this.a.d.getClientRects()[0],a[0]-=b.left,a[1]-=b.top);b=this.xc(a[0],a[1]);a=(this.offset[0]+b.x)/this.n/this.a.width;
b=(this.offset[1]+b.y)/this.n/this.a.height;var c=this.a.Y||[0,0,1,1];return d&&[a,b,this.n]||[Math.max(c[0],Math.min(c[2],a)),Math.max(c[1],Math.min(c[3],b)),this.n]},xc:function(a,b,d){return Math.rotate(a,b,this.a.d.R,this.a.d.Z,d||this.rotation)},Ja:function(a,b,d){if(1>this.a.Ca||this.a.t)d=!0;a[2]&&this.ma(a[2],d);this.a.Y&&!this.a.t&&(a[0]=Math.max(this.a.Y[0],Math.min(this.a.Y[2],a[0])),a[1]=Math.max(this.a.Y[1],Math.min(this.a.Y[3],a[1])));this.Aa(a[0]*this.a.width*this.n-this.a.d.R/2,a[1]*
this.a.height*this.n-this.a.d.Z/2,!0,d);b||this.la();return!0},oh:u("ba"),ag:function(a,b){if(this.a.D){var d=this.a.G;return this.a.D.c.ag(d[0]+a*(d[2]-d[0]),d[1]+b*(d[3]-d[1]))}return[a,b]},$f:function(a,b){if(this.a.G){var d=this.a.G;return this.a.D.c.$f(a*(d[2]-d[0]),b*(d[3]-d[1]))}return[a,b]},gd:function(a,b){var d=this.xc(a[0]*this.a.width*this.n-this.offset[0],a[1]*this.a.height*this.n-this.offset[1],-this.rotation);if(b){var c=this.a.d.getClientRects()[0];return[d.x+c.left,d.y+c.top]}return[d.x,
d.y]},Tb:function(a,b){1!=this.a.Ca&&(a=!0);b&&(a=!1);if(this.a.t){var d=this.a.d.R,c=this.a.d.Z,f=this.a.F.ja([0,0]).splice(0,2),d=this.a.F.ja([d,c]).splice(0,2),c=0.005/this.n;f[0]-=c;f[1]-=c;d[0]+=c;d[1]+=c;return f.concat(d)}if(this.rotation){var f=this.ja([0,0],void 0,a),c=this.ja([this.a.d.R,0],void 0,a),d=this.ja([this.a.d.R,this.a.d.Z],void 0,a),n=this.ja([0,this.a.d.Z],void 0,a),g=this.a.Y;return[Math.max(g[0],Math.min(g[2],Math.min(f[0],c[0],d[0],n[0]))),Math.max(g[1],Math.min(g[3],Math.min(f[1],
c[1],d[1],n[1]))),Math.max(g[0],Math.min(g[2],Math.max(f[0],c[0],d[0],n[0]))),Math.max(g[1],Math.min(g[3],Math.max(f[1],c[1],d[1],n[1])))]}return this.ja([0,0],void 0,a).splice(0,2).concat(this.ja([this.a.d.R,this.a.d.Z],void 0,a).splice(0,2))},eg:function(){var a=this.a.O.eb.getClientRects()[0];return this.Bf=[Math.max(0,Math.min(1,0>a.left?-a.left/a.width:0)),Math.max(0,Math.min(1,0>a.top?-a.top/a.height:0)),Math.max(0,Math.min(1,1-(0>innerWidth-a.right?-(innerWidth-a.right)/a.width:0))),Math.max(0,
Math.min(1,1-(0>innerHeight-a.bottom?-(innerHeight-a.bottom)/a.height:0)))]},Jc:function(a,b,d){this.Ja(this.dg(a,d),!b,d)},dg:function(a,b){a instanceof Array&&(a=new c.e.sb(this.a,a));return a.ef(!b).li()},Aa:function(a,b,d,c){this.a.mh&&(c=!0);if(this.a.t||c)this.offset[0]=a+(d?0:this.offset[0]),this.offset[1]=b+(d?0:this.offset[1]);else{c=this.a.width*this.n-this.a.d.rb;var f=this.a.height*this.n-this.a.d.qb,g=(this.a.d.R-this.a.d.rb)/2,h=(this.a.d.Z-this.a.d.qb)/2;this.offset[0]=Math.max(-g,
Math.min(c-g,a+(d?0:this.offset[0])))+(0>c&&c/2||0);this.offset[1]=Math.max(-h,Math.min(f-h,b+(d?0:this.offset[1])))+(0>f&&f/2||0);this.a.Y&&(a=[this.a.Y[0]*this.a.width*this.a.c.n,this.a.Y[1]*this.a.height*this.a.c.n,this.a.Y[2]*this.a.width*this.a.c.n-this.a.d.R,this.a.Y[3]*this.a.height*this.a.c.n-this.a.d.Z],this.offset[0]=Math.max(a[0],Math.min(a[2],this.offset[0]))+Math.min(0,a[2]-a[0])/2,this.offset[1]=Math.max(a[1],Math.min(a[3],this.offset[1]))+Math.min(0,a[3]-a[1])/2)}this.a.t||(this.I=
this.Tb());this.oe=this.Tb(null,!0);return!0},ma:function(a,b,d){this.n=Math.max(!b&&this.ka||0,Math.min(this.a.Ca,a));this.Pc=this.a.Pc instanceof Element&&this.a.Pc.micrio.camera.getCurrentCoo()[2]||1;this.Ve=!0;for(a=0;a<this.a.L.length;a++)this.a.L[a].b.scale=this.n*this.a.L[a].scale,isNaN(this.Pc)||(this.a.L[a].b.scale*=this.Pc);d&&this.Ja([this.ba[0],this.ba[1]],!0);return!0},zg:function(a,b,d){if(this.rotation!=a){this.a.og=!0;var c=[this.a.d.R/2,this.a.d.Z/2],f=this.n==this.wb,g=this.n,h=
[this.I[0]+(this.I[2]-this.I[0])/2,this.I[1]+(this.I[3]-this.I[1])/2];this.stop();this.ea.add({qe:this.rotation},{qe:a},b||0,function(a,b){this.a.j.translate(c[0],c[1]);this.a.j.rotate((b.qe-this.rotation)*Math.PI/180);this.a.j.translate(-c[0],-c[1]);this.rotation=b.qe;var k=this.zc(this.a.width,this.a.height);this.a.rb=k.width;this.a.qb=k.height;k=this.zc(this.a.d.R,this.a.d.Z);this.a.d.rb=k.width;this.a.d.qb=k.height;this.Se();this.ma(f&&this.wb||g);this.Ja(h,!0);this.Ia&&this.Ia.l();d||this.la()}.bind(this),
r.ad)}},l:function(){this.Sb=!0;this.I=this.Tb();this.oe=this.Tb(null,!0);this.ba=this.ja([this.a.d.R/2,this.a.d.Z/2]);if(this.a.t)this.a.l(),this.a.F.l();else if(!this.a.ua){if(this.a.data.background)this.a.j.fillStyle=this.a.data.background,this.a.j.fillRect(0,0,this.a.i.width,this.a.i.height);else if(this.a.clearRect)if(this.rotation){var a=this.a.d.R/2,b=this.a.d.Z/2;this.a.j.translate(a,b);this.a.j.rotate(-this.rotation*Math.PI/180);this.a.j.clearRect(-a,-b,2*a,2*b);this.a.j.rotate(this.rotation*
Math.PI/180);this.a.j.translate(-a,-b)}else this.a.j.clearRect(0,0,this.a.i.width,this.a.i.height);this.a.l()}if(this.a.t||this.ba.join(",")!=this.tg)this.Ve&&(this.Ve=!1,this.a.i.dispatchEvent(new m("zoom",{detail:this.ba}))),this.a.i.dispatchEvent(new m("move",{detail:this.a}));this.a.i.dispatchEvent(new m("draw",{detail:this.a}));if(this.vd.length)for(a=0;a<this.vd.length;a++)this.vd[a]();this.tg=this.ba.join(",");this.Sb=!1},la:function(){this.Sb=!0;cancelAnimationFrame(this.na);this.na=requestAnimationFrame(this.l)},
zoom:function(a,b){var d=this.a.d.R/this.a.width,c=0.5*this.n/d,f=this.ja([this.a.d.R/2,this.a.d.Z/2]).splice(0,2);this.ma(this.n+d/3*c*(a/120));b&&this.Ja(f,!0)},Ng:function(a,b){var d=this.a.d.R/this.a.width,c=0.5*this.n/d;0>a&&(a*=2/3);var f=this.ja([this.a.d.R/2,this.a.d.Z/2]).splice(0,2),d=d/3*c*3*(a||1);this.stop();this.rf.bd=this.n;this.ea.add(this.rf,{bd:this.n+d},isNaN(b)&&200||b,function(a,b){this.ma(b.bd);this.Ja(f)}.bind(this),r.ad)},hc:function(a,b){this.Ng(isFinite(a)?a:1,b)},ic:function(a,
b){this.Ng(-(isFinite(a)?a:1),b)},zc:function(a,b){var d=this.rotation*Math.PI/180;return{width:b*Math.abs(Math.sin(d))+a*Math.abs(Math.cos(d)),height:b*Math.abs(Math.cos(d))+a*Math.abs(Math.sin(d))}},Se:function(){this.wb=Math.max(this.a.d.rb/this.a.width,this.a.d.qb/this.a.height);this.ka=this.a.Mh&&this.wb||Math.min(this.a.d.R/this.a.rb,this.a.d.Z/this.a.qb);this.a.Y&&(this.ka/=Math.max(this.a.Y[2]-this.a.Y[0],this.a.Y[3]-this.a.Y[1]));this.initScale=this.kd=this.a.Bc?this.wb:this.ka;if(!this.a.Kb||
this.a.Bc&&this.n<this.kd)this.n=this.kd},onresize:function(a){!0===a?this.ac(a):(cancelAnimationFrame(this.zf),this.zf=requestAnimationFrame(this.ac))},ac:function(a){if(!0===a||!(h.fullscreenElement||h.mozFullScreenElement||h.webkitFullscreenElement||h.msFullscreenElement)||this.ca.Qb)this.a.d.R=this.a.d.offsetWidth,this.a.d.Z=this.a.d.offsetHeight,a=this.zc(this.a.d.R,this.a.d.Z),this.a.d.rb=a.width,this.a.d.qb=a.height,this.a.ua||(this.a.i.width=this.a.d.R*this.a.nb,this.a.i.height=this.a.d.Z*
this.a.nb,1!=this.a.nb&&(this.a.i.style.width=this.a.d.R+"px",this.a.i.style.height=this.a.d.Z+"px"),this.a.i.offset=this.a.d.getClientRects()[0]),a=this.I,this.Se(),this.ma(this.n),this.Aa(this.offset[0],this.offset[1],!0),a&&this.Jc(a),this.rotation&&(a=this.rotation,this.rotation=0,this.zg(a,0,!0)),!this.a.t&&(!this.a.ua&&1<this.a.nb)&&this.a.j.setTransform(this.a.nb,0,0,this.a.nb,0,0),this.la()},Wf:function(){this.ye||(this.ye=!0,this.ca={Qb:!1,kf:!1,Ic:this.a.d.requestFullScreen||this.a.d.webkitRequestFullScreen||
this.a.d.mozRequestFullScreen||this.a.d.msRequestFullscreen,ve:h.exitFullscreen||h.mozCancelFullScreen||h.webkitExitFullscreen||h.msExitFullscreen,onchange:"onwebkitfullscreenchange"in h?"webkitfullscreenchange":"onmozfullscreenchange"in h?"mozfullscreenchange":"onmsfullscreenchange"in h?"MSFullscreenChange":"onfullscreenchange"in h?"fullscreenchange":null},this.ca.Ic?(this.ca.Ic=this.ca.Ic.bind(this.a.d),this.ca.ve=this.ca.ve.bind(h),h.addEventListener(this.ca.onchange,this.ed),this.tb.onclick=this.fd):
this.a.d.classList.add("no-fullscreen"))},ed:function(){this.ca.Qb=(h.fullscreenElement||h.mozFullScreenElement||h.webkitFullscreenElement||h.msFullscreenElement)==this.a.d;this.a.d.classList[this.ca.Qb&&"add"||"remove"]("fullscreen");this.ca.Qb?this.ca.kf=!0:this.ca.kf&&(this.ca.kf=!1);this.onresize()},fd:function(){this.ye||this.Wf();if(!this.ca.Ic)return console.warn("Your browser does not support full screen");this.ca.Qb?this.ca.ve():this.ca.Ic()},rh:function(){return this.ba[0].toPrecision(4)+
","+this.ba[1].toPrecision(4)+","+this.ba[2].toPrecision(4)},Be:function(){return(this.I[0].toFixed(4)+"-"+this.I[1].toFixed(4)+"-"+this.I[2].toFixed(4)+"-"+this.I[3].toFixed(4)).replace(/\.0000/g,"").replace(/0\./g,"_")},Cb:function(){this.r.Cb();this.Di&&this.Ia.Cb()},Gb:function(){this.r.Gb();this.Ia&&this.Ia.Gb()}};c.e.prototype.getXY=c.e.prototype.gd;c.e.prototype.getCurrentCoo=c.e.prototype.oh;c.e.prototype.flyTo=c.e.prototype.dd;c.e.prototype.flyToView=c.e.prototype.zb;c.e.prototype.flyToFullView=
c.e.prototype.kh;c.e.prototype.flyToCoverView=c.e.prototype.jh;c.e.prototype.isZoomedOut=c.e.prototype.Jh;c.e.prototype.getMinScale=c.e.prototype.wh;c.e.prototype.getCoverScale=c.e.prototype.nh;c.e.prototype.getFlyPerc=c.e.prototype.qh;c.e.prototype.getCoo=c.e.prototype.ja;c.e.prototype.getView=c.e.prototype.Tb;c.e.prototype.getViewCoo=c.e.prototype.dg;c.e.prototype.getDistance=c.e.prototype.wc;c.e.prototype.zoom=c.e.prototype.zoom;c.e.prototype.zoomIn=c.e.prototype.hc;c.e.prototype.zoomOut=c.e.prototype.ic;
c.e.prototype.setCoo=c.e.prototype.Ja;c.e.prototype.setView=c.e.prototype.Jc;c.e.prototype.setOffset=c.e.prototype.Aa;c.e.prototype.reset=c.e.prototype.reset;c.e.prototype.setScale=c.e.prototype.ma;c.e.prototype.setRotation=c.e.prototype.zg;c.e.prototype.draw=c.e.prototype.l;c.e.prototype.render=c.e.prototype.la;c.e.prototype.pause=c.e.prototype.pause;c.e.prototype.resume=c.e.prototype.Ue;c.e.prototype.onresize=c.e.prototype.onresize;c.e.prototype.fullScreenToggle=c.e.prototype.fd;c.e.prototype.getHash=
c.e.prototype.rh;c.e.prototype.getViewUri=c.e.prototype.Be;c.e.prototype.hookScroll=c.e.prototype.Cb;c.e.prototype.unhookScroll=c.e.prototype.Gb;c.e.Viewport=c.e.sb=function(a,b){this.a=a;this.$=b||[0,0,1,1]};c.e.sb.prototype={ef:function(a){var b=[this.$[0],this.$[1],this.$[2],this.$[3]],d=[b[2]-b[0],b[3]-b[1]],e=this.a&&this.a.Y;if(e&&a){var f=[e[2]-e[0],e[3]-e[1]];d[0]=Math.min(d[0],f[0]);d[1]=Math.min(d[1],f[1]);b[1]<e[1]&&(b[1]=e[1],b[3]=Math.min(e[3],e[1]+d[1]));b[0]<e[0]&&(b[0]=e[0],b[2]=Math.min(e[2],
e[0]+d[0]));b[3]>e[3]&&(b[3]=e[3],b[1]=Math.max(e[1],e[3]-d[1]));b[2]>e[2]&&(b[2]=e[2],b[0]=Math.max(e[0],e[2]-d[0]))}e=Math.min(this.a.d.offsetWidth/d[0]/this.a.width,this.a.d.offsetHeight/d[1]/this.a.height);if(a||this.a.Bc)e=Math.min(this.a.Ca,Math.max(this.a.c.ka,e));return new c.e.Hb(this.a,b[0]+d[0]/2,b[1]+d[1]/2,e)}};c.e.sb.prototype.toCoo=c.e.sb.prototype.ef;c.e.Coordinates=c.e.Hb=function(a,b,d,c){this.a=a;b instanceof Array&&(c=b[2],d=b[1],b=b[0]);this.x=isNaN(b)?0.5:b;this.y=isNaN(d)?0.5:
d;this.scale=isNaN(c)?0:c};c.e.Hb.prototype={li:function(){return[this.x,this.y,this.scale]},Pd:function(a,b){a=!1!==a;var d=this.a&&this.a.Y||[0,0,1,1],e=!1!==b&&Math.max(this.a.c.ka,Math.min(1,this.scale))||this.scale,f=[this.a.width*this.x,this.a.height*this.y],e=[this.a.d.offsetWidth/e/2,this.a.d.offsetHeight/e/2],f=[(f[0]-e[0])/this.a.width,(f[1]-e[1])/this.a.height,(f[0]+e[0])/this.a.width,(f[1]+e[1])/this.a.height];if(a){var e=f[2]-f[0],g=f[3]-f[1];f[0]<d[0]&&(f[0]=d[0],f[2]=Math.min(d[2],
d[0]+e));f[1]<d[1]&&(f[1]=d[1],f[3]=Math.min(d[3],d[1]+g));f[3]>d[3]&&(f[3]=d[3],f[1]=Math.max(d[1],d[3]-g));f[2]>d[2]&&(f[2]=d[2],f[0]=Math.max(d[0],d[2]-e))}return new c.e.sb(this.a,f)}};c.e.Hb.prototype.toView=c.e.Hb.prototype.Pd;c.e.lf=function(){this.paused=this.S=!1;this.va=[];this.step=this.step.bind(this);this.na=null;this.ta=0};c.e.lf.prototype={step:function(a){this.ta||(this.ta=a);for(var b,d,c=0;c<this.va.length;c++)b=this.va[c],d=this.Gf(a,b),1<=d&&(b.Qe&&b.Qe(b),this.va.splice(c--,1)),
b.Cg&&b.Cg(d,b.$b);this.ta=a;this.va.length?this.na=requestAnimationFrame(this.step):this.stop()},Gf:function(a,b){var d=Math.min(1,(b.Ne+=a-this.ta)/b.fh);b.Uf&&(d=b.Uf(d));for(var c in b.target)b.$b[c]=b.ji[c]*(1-d)+b.target[c]*d;if(b.yd)for(c in this.Gf(a,b.yd),b.yd.target)b.$b[c]=d*b.$b[c]+(1-d)*b.yd.$b[c];return d},start:function(){this.S||(this.S=!0,this.na=requestAnimationFrame(this.step))},stop:function(){if(this.S){this.paused=this.S=!1;for(cancelAnimationFrame(this.na);this.va.length;)this.va.shift();
this.ta=0}},pause:function(){!this.paused&&this.S&&(this.paused=!0,cancelAnimationFrame(this.na))},Ue:function(){this.paused&&(this.paused=!1,this.ta=performance.now(),this.na=requestAnimationFrame(this.step))},remove:function(a){for(var b=0;b<this.va.length;b++)if(this.va[b].$b==a){this.va.splice(b,1);break}},ei:function(a){for(var b=0;b<this.va.length;b++)if(this.va[b].id==a)return this.va.splice(b,1)[0]},add:function(a,b,c,e,f,g){this.remove(a);if(0>=c){for(var h in b)a[h]=b[h];e instanceof Function&&
e(1,a);return new Promise(function(a){a()})}var k={},m={};for(h in b)k[h]=a[h],m[h]=b[h]-a[h];this.va.length||(this.ta=0);var l={$b:a,target:b,Uf:f,U:m,ji:k,fh:isNaN(c)&&500||c,Cg:e,Ne:0,Qe:null,id:g,yd:this.ei(g)};l.vg=new Promise(function(a){l.Qe=a}.bind(l));l.vg.ea=l;this.va.push(l);this.S||this.start();return l.vg}};var r=g.Beziers={ad:s(0.42,0,0.58,1),gh:s(0.42,0,1,1),hh:s(0,0,0.58,1),hc:s(1,0,0.84,0.92),ic:s(0,0,0.4,1),ti:s(0,1,0.24,1)};r.easeInOut=r.ad;r.easeIn=r.gh;r.easeOut=r.hh;c.e.Q=function(a){this.c=
a;this.a=a.a;this.H=a.a.d;this.Mb=this.$a=this.jb=!1;this.Sf=a.a.data.dragElasticity||a.a.t&&0.2||1;this.Yb=[];this.ld=!("onmousewheel"in h.body);this.hg="ontouchstart"in g||"onpointerdown"in g;this.Lb=navigator.browser.firefox&&"DOMMouseScroll"||"mousewheel";this.b={f:{za:[0,0],wa:null,yb:null,rotation:0,S:null,Li:[0,0],bd:0,r:{start:["mousedown","touchstart"],move:["mousemove","touchmove"],stop:["mouseup","touchend"]},g:{Eg:325,df:null,timestamp:null,U:null,ea:!1,scroll:[0,0],x:{offset:0,Ba:0,frame:0,
Ra:0,target:0,U:0},y:{offset:0,Ba:0,frame:0,Ra:0,target:0,U:0}}},N:{wa:null,yb:null,Ag:0,Bg:0,Jf:[0,0],fc:[0,0],Bd:[0,0],te:0,Xh:0},ga:{wa:null,yb:null,U:null,ig:!1},Of:{ng:0},state:{ah:location.pathname.replace(/\/_?\d+-_?\d+-_?\d+-_?\d+$/,"").replace(/\/$/,""),Jg:null,timeout:null}};this.Ae=this.Ae.bind(this);this.Zc=this.Zc.bind(this);this.gb=this.gb.bind(this);this.Sa=this.Sa.bind(this);this.pe=this.pe.bind(this);this.Za=this.Za.bind(this);this.Ad=this.Ad.bind(this);this.zd=this.zd.bind(this);
this.Me=this.Me.bind(this);this.Ec=this.Ec.bind(this);this.ga=this.ga.bind(this);this.Sd=this.Sd.bind(this);this.uc=this.uc.bind(this);this.nd=this.nd.bind(this);this.Hd=this.Hd.bind(this);this.We=this.We.bind(this);this.re=this.re.bind(this)};c.e.Q.prototype={Ff:function(a){this.Yb.push(a)},je:function(a){a.addEventListener(this.Lb,this.cancel);a.addEventListener("mousedown",this.cancel);a.addEventListener("dblclick",this.cancel)},hf:function(a){a.removeEventListener(this.Lb,this.cancel);a.removeEventListener("mousedown",
this.cancel);a.removeEventListener("dblclick",this.cancel)},cancel:function(a){a.stopPropagation()},fi:function(a){for(var b=0;b<this.Yb.length;b++)if(this.Yb[b]==a)return this.Yb.splice(b,1)},we:function(){if(navigator.browser.mobile&&(this.yf=performance.now(),!(this.yf-500<this.ta))){this.ta=this.yf;for(var a=0;a<this.Yb.length;a++)this.Yb[a]({detail:this.c.ba})}},stop:function(){cancelAnimationFrame(this.b.f.g.wa);cancelAnimationFrame(this.b.f.wa);cancelAnimationFrame(this.b.N.wa);cancelAnimationFrame(this.b.ga.wa)},
oa:function(){this.jb||(this.jb=!0,!1!==this.a.data.hookDrag&&this.jg(),!1!==this.a.data.hookScroll&&this.Cb(),this.a.data.hookKeys&&this.kg(),this.c.a.t||(navigator.browser.mobile?this.H.addEventListener("touchstart",this.re):this.H.addEventListener("dblclick",this.uc)),this.c.Ia&&this.c.Ia.Kb(),this.a.Fg&&this.a.i.addEventListener("move",this.Hd),this.H.classList.add("hooked"))},sa:function(){this.jb&&(this.jb=!1,this.Gg(),this.Gb(),this.H.removeEventListener("dblclick",this.uc),this.a.data.hookKeys&&
this.Ig(),this.c.Ia&&this.c.Ia.Hg(),this.a.Fg&&this.a.i.removeEventListener("move",this.Hd),this.H.classList.remove("hooked"))},Cb:function(){this.H.addEventListener(this.ld?"DOMMouseScroll":"mousewheel",this.ga,l)},Gb:function(){this.H.removeEventListener(this.ld?"DOMMouseScroll":"mousewheel",this.ga,l)},jg:function(){for(var a in this.b.f.r.start)this.H.addEventListener(this.b.f.r.start[a],this.gb,l);this.hg&&(this.H.addEventListener("touchstart",this.Ad,l),navigator.s.ie&&this.H.addEventListener("touchend",
this.Ug=function(){}))},Gg:function(){for(var a in this.b.f.r.start)this.H.removeEventListener(this.b.f.r.start[a],this.gb,l);this.hg&&(this.H.removeEventListener("touchstart",this.Ad,l),navigator.s.ie&&this.H.addEventListener("touchend",this.Ug))},kg:function(){h.addEventListener("keydown",this.nd)},Ig:function(){h.removeEventListener("keydown",this.nd)},ze:function(a){if(a.touches.length)return a.touches[0]},gb:function(a){if("mousedown"!=a.type||1==a.which){if(this.$a)return a.touches&&2==a.touches.length&&
this.Za(a);this.$a=!0;this.b.f.rotation=this.c.rotation;this.c.stop();for(var b in this.b.f.r.move)addEventListener(this.b.f.r.move[b],this.Sa,l);for(b in this.b.f.r.stop)addEventListener(this.b.f.r.stop[b],this.Za,l);this.H.classList.add("dragging");a.touches&&(a=this.ze(a));this.b.f.za=[a.clientX,a.clientY];this.b.f.g.y.Ba=this.b.f.g.y.Ra=0;this.b.f.g.y.frame=this.b.f.g.y.offset;this.b.f.g.x.Ba=this.b.f.g.x.Ra=0;this.b.f.g.x.frame=this.b.f.g.x.offset;this.b.f.g.timestamp=performance.now();clearInterval(this.b.f.g.df);
this.b.f.g.df=setInterval(this.Ae,50)}},Sa:function(a){cancelAnimationFrame(this.b.f.wa);a.stopPropagation();q||a.preventDefault();a.touches&&(a=this.ze(a));this.b.f.yb=a;this.b.f.wa=requestAnimationFrame(this.pe);this.we()},pe:function(a){a=this.b.f.yb;var b=this.b.f.za[0]-a.clientX,c=this.b.f.za[1]-a.clientY;this.c.a.t&&(b/=Math.PI,c/=Math.PI);var e=this.c.rotation*Math.PI/180,f=b,b=c*Math.sin(e)+b*Math.cos(e),c=c*Math.cos(e)-f*Math.sin(e);this.c.Aa(b,c);this.c.la();this.b.f.za=[a.clientX,a.clientY];
this.b.f.g.x.U=b;if(2<this.b.f.g.x.U||-2>this.b.f.g.x.U)this.b.f.g.x.offset+=this.b.f.g.x.U;this.b.f.g.y.U=c;if(2<this.b.f.g.y.U||-2>this.b.f.g.y.U)this.b.f.g.y.offset+=this.b.f.g.y.U},Za:function(a){if(this.$a){this.$a=!1;setTimeout(function(){}.bind(this));for(var b in this.b.f.r.move)removeEventListener(this.b.f.r.move[b],this.Sa,l);for(b in this.b.f.r.stop)removeEventListener(this.b.f.r.stop[b],this.Za,l);this.H.classList.remove("dragging");a.touches&&(a=this.ze(a));clearInterval(this.b.f.g.df);
if(10<this.b.f.g.y.Ba||-10>this.b.f.g.y.Ba||10<this.b.f.g.x.Ba||-10>this.b.f.g.x.Ba)this.b.f.g.x.Ra=0.8*this.b.f.g.x.Ba,this.b.f.g.x.target=Math.round(this.b.f.g.x.offset+this.b.f.g.x.Ra),this.b.f.g.y.Ra=0.8*this.b.f.g.y.Ba,this.b.f.g.y.target=Math.round(this.b.f.g.y.offset+this.b.f.g.y.Ra),this.b.f.g.timestamp=performance.now(),this.b.f.g.wa=requestAnimationFrame(this.Zc)}},Ae:function(){this.b.f.g.U=1+(performance.now()-this.b.f.g.timestamp);this.b.f.g.timestamp=performance.now();this.b.f.g.x.Ba=
0.8*this.Sf*(1E3*(this.b.f.g.x.offset-this.b.f.g.x.frame)/this.b.f.g.U)+0.2*this.b.f.g.x.Ba;this.b.f.g.y.Ba=0.8*this.Sf*(1E3*(this.b.f.g.y.offset-this.b.f.g.y.frame)/this.b.f.g.U)+0.2*this.b.f.g.y.Ba;this.b.f.g.x.frame=this.b.f.g.x.offset;this.b.f.g.y.frame=this.b.f.g.y.offset},scroll:function(a,b){this.c.Aa(a-this.b.f.g.x.offset,b-this.b.f.g.y.offset);this.c.la();this.b.f.g.x.offset=a;this.b.f.g.y.offset=b},Zc:function(){this.b.f.g.ea=!1;this.b.f.g.scroll=[this.b.f.g.x.target,this.b.f.g.y.target];
this.b.f.g.Rf=performance.now()-this.b.f.g.timestamp;if(this.b.f.g.x.Ra){var a=-this.b.f.g.x.Ra*Math.exp(-this.b.f.g.Rf/this.b.f.g.Eg);if(0.5<a||-0.5>a)this.b.f.g.scroll[0]=this.b.f.g.x.target+a,this.b.f.g.ea=!0}this.b.f.g.y.Ra&&(a=-this.b.f.g.y.Ra*Math.exp(-this.b.f.g.Rf/this.b.f.g.Eg),0.5<a||-0.5>a)&&(this.b.f.g.scroll[1]=this.b.f.g.y.target+a,this.b.f.g.ea=!0);this.scroll(this.b.f.g.scroll[0],this.b.f.g.scroll[1]);this.b.f.g.ea&&(this.b.f.g.wa=requestAnimationFrame(this.Zc))},wc:function(a){if(2==
a.touches.length)return Math.Ed(a.touches[0].clientX-a.touches[1].clientX,a.touches[0].clientY-a.touches[1].clientY)/Math.Ed(this.H.offsetWidth,this.H.offsetHeight)},Yf:function(a){this.b.N.fc[0]=Math.min(a.touches[0].clientX,a.touches[1].clientX);this.b.N.fc[1]=Math.min(a.touches[0].clientY,a.touches[1].clientY);this.b.N.Bd[0]=Math.max(a.touches[0].clientX,a.touches[1].clientX);this.b.N.Bd[1]=Math.max(a.touches[0].clientY,a.touches[1].clientY);return[this.b.N.fc[0]+(this.b.N.Bd[0]-this.b.N.fc[0])/
2,this.b.N.fc[1]+(this.b.N.Bd[1]-this.b.N.fc[1])/2]},Ad:function(a){if(this.Mb||2!=a.touches.length)return this.Ec(a);a.stopPropagation();q||a.preventDefault();this.c.stop();this.Mb=!0;this.b.N.Ag=this.wc(a);this.b.N.Bg=this.c.n;this.b.N.Jf=this.c.ja(this.Yf(a),!0);this.H.addEventListener("touchmove",this.zd,y);this.H.addEventListener("touchend",this.Ec,y);this.H.classList.add("pinching")},zd:function(a){cancelAnimationFrame(this.b.N.wa);a.stopPropagation();q||a.preventDefault();this.b.N.yb=a;this.b.N.wa=
requestAnimationFrame(this.Me);this.we()},Me:function(a){a=this.b.N.yb;this.b.N.te=this.wc(a);if(this.b.N.te){this.c.ma(this.b.N.Bg*(this.b.N.Xh=this.b.N.te/this.b.N.Ag));var b=this.c.gd(this.b.N.Jf,!0),c={x:b[0],y:b[1]};a=this.Yf(a);var e={x:a[0],y:a[1]};this.c.rotation&&(c=this.c.xc(b[0],b[1]),e=this.c.xc(a[0],a[1]));this.c.Aa(c.x-e.x,c.y-e.y);this.c.la()}},Ec:function(a){this.Mb&&(this.Mb=!1,q||a.preventDefault(),a.stopPropagation(),this.H.removeEventListener("touchmove",this.zd,!0),this.H.removeEventListener("touchend",
this.Ec,!0),this.H.classList.remove("pinching"))},ga:function(a){this.$a||this.Mb||(this.b.ga.U=this.ld?30*-a.detail:void 0!==a.bh?-a.bh:a.wheelDelta,this.b.ga.U*=this.c.a.yg,navigator.s.OSX&&(this.b.ga.U*=-1),!this.b.ga.ig&&0>this.b.ga.U&&this.c.ka==this.c.n||(q||a.preventDefault(),this.b.ga.yb=a,this.c.stop(),navigator.browser.ie9?this.Sd():(cancelAnimationFrame(this.b.ga.wa),this.b.ga.wa=requestAnimationFrame(this.Sd))))},Sd:function(a){a=this.b.ga.yb;this.b.ga.ig=!0;var b=!(this.c.ca.Qb&&this.ld),
c=this.c.ja([a.clientX,a.clientY],b);this.c.zoom(this.b.ga.U);if(this.c.a.t)this.c.Ja([this.c.ba[0],this.c.ba[1]]),this.c.la();else{var b=this.c.gd(c,b),c={x:b[0],y:b[1]},e={x:a.clientX,y:a.clientY};this.c.rotation&&(c=this.c.xc(b[0],b[1]),e=Math.rotate(a.clientX,a.clientY,innerWidth,innerHeight,this.c.rotation));this.c.Aa(c.x-e.x,c.y-e.y);navigator.browser.ie9?this.c.l():this.c.la()}},re:function(a){if(1==a.touches.length&&250>performance.now()-this.b.Of.ng){a.stopPropagation();a.preventDefault();
var b=a.target.getBoundingClientRect();this.uc({clientX:a.touches[0].clientX,clientY:a.touches[0].clientY,offsetX:a.touches[0].pageX-b.left,offsetY:a.touches[0].pageY-b.top})}this.b.Of.ng=performance.now()},uc:function(a){this.c.stop();if(this.c.n+1/Math.max(this.c.a.width,this.c.a.height)>=this.c.a.Ca)this.a.dh&&this.c.dd(0.5,0.5,this.c.ka,500);else{var b=new c.e.Hb(this.c.a,this.c.ja([a.clientX,a.clientY],!0));b.scale+=(2.5*b.scale-b.scale)*this.c.a.yg;var d=[this.a.d.offsetWidth,this.a.d.offsetHeight];
b.x-=(2*(a.clientX/d[0])-1)/2*d[0]/b.scale/this.a.width;b.y-=(2*(a.clientY/d[1])-1)/2*d[1]/b.scale/this.a.height;this.c.zb(b.Pd(void 0,1==this.c.a.Ca),500,void 0,void 0,!0)}},nd:function(a){if(!this.$a&&!this.Mb){switch(a.keyCode){case 37:this.c.Aa(-this.H.offsetWidth/2,0);break;case 39:this.c.Aa(this.H.offsetWidth/2,0);break;case 38:this.c.Aa(0,-this.H.offsetHeight/2);break;case 40:this.c.Aa(0,this.H.offsetHeight/2);break;case 32:this.c.zoom(a.shiftKey&&-120||120,!0);break;case 187:case 61:a.shiftKey&&
this.c.zoom(120,!0);break;case 189:case 173:this.c.zoom(-120,!0);break;default:return}this.c.stop();this.c.la()}},Hd:function(){clearTimeout(this.b.state.timeout);this.b.state.timeout=setTimeout(this.We,100)},We:function(){this.b.state.Jg=this.c.Be();history.replaceState(null,null,this.b.state.ah+("0-0-1-1"!=this.b.state.Jg&&"/"+this.c.Be()||""))}};c.e.Q.prototype.hook=c.e.Q.prototype.oa;c.e.Q.prototype.unhook=c.e.Q.prototype.sa;c.e.Q.prototype.hookScroll=c.e.Q.prototype.Cb;c.e.Q.prototype.unhookScroll=
c.e.Q.prototype.Gb;c.e.Q.prototype.hookDrag=c.e.Q.prototype.jg;c.e.Q.prototype.unhookDrag=c.e.Q.prototype.Gg;c.e.Q.prototype.hookKeys=c.e.Q.prototype.kg;c.e.Q.prototype.unhookKeys=c.e.Q.prototype.Ig;c.e.Q.prototype.addMoveListener=c.e.Q.prototype.Ff;c.e.Q.prototype.fireMobileEvents=c.e.Q.prototype.we;c.e.Xd=function(a){this.c=a;this.Vb=!1;this.width=200;this.height=Math.round(this.width/a.a.Yc);160<this.height&&(this.width=Math.round(160*a.a.Yc),this.height=160);this.Ta=null;this.Jd=!(a.a.Pi&&!a.a.data.thumbSrc);
this.Wb=!1;this.r=["mousemove","mouseup","touchmove","touchend"];this.timeout=null;this.Wb=!1;this.el=this.Oa=this.j=this.Ta=null;this.Dd=this.Cd=-1;this.show()};c.e.Xd.prototype={M:function(){this.Vb||(this.Vb=!0,this.V=this.V.bind(this),this.Eb=this.Eb.bind(this),this.l=this.l.bind(this),this.onerror=this.onerror.bind(this),this.bb=this.bb.bind(this),this.Lb=this.Lb.bind(this),this.el=this.Oa=h.createElement("div"),this.Oa.className="minimap micrio-hide",this.Ga=c.v.m("canvas",null,this.Oa),this.Ga.style.width=
(this.Ga.width=this.width)+"px",this.Ga.style.height=(this.Ga.height=this.height)+"px",this.Fa=c.v.m("div","minimap-buttons",this.Oa),this.Wc=c.v.m("button","fa fa-plus",this.Fa),this.Xc=c.v.m("button","fa fa-minus",this.Fa),this.j=this.Ga.getContext("2d"),this.j.lineWidth=1,this.j.strokeStyle="white",this.j.translate(0.5,0.5),this.Jd&&(this.Ta=new Image,this.Ta.onload=this.l,this.Ta.onerror=this.onerror,this.Ta.src=this.c.a.Dg))},onerror:function(){this.Jd=!1},show:function(){this.M();this.c.a.d.appendChild(this.Oa);
this.oa()},V:function(){this.Oa.classList.add("micrio-hide")},remove:function(){this.Oa.parentNode.removeChild(this.Oa);this.sa();this.Hg()},oa:function(){this.c.a.i.addEventListener("move",this.l)},sa:function(){this.c.a.i.removeEventListener("move",this.l)},Kb:function(){this.Ga.addEventListener("mousedown",this.Eb,l);this.Ga.addEventListener("touchstart",this.Eb,l);this.c.a.i.addEventListener("mousemove",this.bb);this.Wc.addEventListener("click",this.c.hc);this.Xc.addEventListener("click",this.c.ic);
this.Wc.addEventListener("dblclick",this.cancel);this.Xc.addEventListener("dblclick",this.cancel);this.Cb()},Cb:function(){this.Ga.addEventListener("mousewheel",this.Lb,l)},Hg:function(){this.Ga.removeEventListener("mousedown",this.Eb,l);this.Ga.removeEventListener("touchstart",this.Eb,l);this.c.a.i.removeEventListener("mousemove",this.bb);this.Wc.removeEventListener("click",this.c.hc);this.Xc.removeEventListener("click",this.c.ic);this.Wc.removeEventListener("dblclick",this.cancel);this.Xc.removeEventListener("dblclick",
this.cancel);this.Gb()},Gb:function(){this.Ga.removeEventListener("mousewheel",this.Lb,l)},cancel:function(a){a.stopPropagation();q||a.preventDefault()},Eb:function(a){if("mousedown"!=a.type||1==a.which)if("mousemove"!=a.type&&"touchmove"!=a.type||this.$a){if("mouseup"==a.type||"touchend"==a.type){for(var b=0;b<this.r.length;b++)removeEventListener(this.r[b],this.Eb,l);return this.$a=!1}if("mousedown"==a.type||"touchstart"==a.type)for(this.$a=!0,this.c.stop(),b=0;b<this.r.length;b++)addEventListener(this.r[b],
this.Eb,l);a.stopPropagation();q||a.preventDefault();b=this.Ga.getClientRects()[0];a=Math.rotate(Math.min(b.width,Math.max(0,(a.touches&&a.touches[0]||a).clientX-b.left)),Math.min(b.height,Math.max(0,(a.touches&&a.touches[0]||a).clientY-b.top)),this.width,this.height,this.c.rotation);this.c.Ja([a.x/this.width,a.y/this.height]);this.c.l()}},l:function(){this.c.a.t||(this.c.ka==this.c.n?(this.Wb||this.Oa.classList.add("micrio-hide"),this.Wb=!0):this.Wb=!1);this.bb();var a=this.c.I;if(!this.c.a.t&&this.c.a.Y)var b=
this.c.a.Y,c=[b[2]-b[0],b[3]-b[1]],a=[(a[0]-b[0])/c[0],(a[1]-b[1])/c[1],1-(b[2]-a[2])/c[0],1-(b[3]-a[3])/c[1]];this.j.clearRect(-0.5,-0.5,this.width,this.height);this.j.globalCompositeOperation="source-over";this.Jd&&this.Ta.width&&this.j.drawImage(this.Ta,-0.5,-0.5,this.width,this.height);this.j.fillStyle="rgba(0,0,0,.5)";this.j.fillRect(0,0,this.width,this.height);this.j.globalAlpha=1;this.j.globalCompositeOperation="destination-out";c=this.c.zc(this.width,this.height);a[0]>a[2]?(this.Pe([0,a[1],
a[2],a[3]],c),this.Pe([a[0],a[1],1,a[3]],c)):this.Pe(a,c);this.c.rotation&&(this.Oa.style.transform="rotate3d(0,0,1,"+this.c.rotation+"deg)");this.j.globalCompositeOperation="destination-over";this.Jd&&this.Ta.width&&this.j.drawImage(this.Ta,-0.5,-0.5,this.width,this.height)},Pe:function(a,b){this.j.globalCompositeOperation="destination-out";var c=this.c.zc(a[2]-a[0],a[3]-a[1]),e=(a[0]+(a[2]-a[0])/2)*this.width,f=(a[1]+(a[3]-a[1])/2)*this.height;this.j.translate(e,f);this.c.rotation&&this.j.rotate(-this.c.rotation*
Math.PI/180);this.j.beginPath();this.j.fillStyle="black";this.j.rect(-Math.round(c.width*b.width/2),-Math.round(c.height*b.height/2),Math.round(c.width*b.width),Math.round(c.height*b.height));this.j.fill();this.c.rotation&&this.j.rotate(this.c.rotation*Math.PI/180);this.j.translate(-e,-f);this.j.globalCompositeOperation="source-over";this.j.stroke()},bb:function(a){this.Wb||a&&a.clientX==this.Cd&&a.clientY==this.Dd||(a&&(this.Cd=a.clientX,this.Dd=a.clientY),this.Oa.classList.remove("micrio-hide"),
clearTimeout(this.timeout),this.timeout=setTimeout(this.V,2E3))},Lb:function(a){a.stopPropagation();q||a.preventDefault();this.c.zoom(navigator.browser.firefox?30*-a.detail:a.wheelDelta,!0);this.c.la()}};c.HTTP=c.Da={ke:{},Xf:function(a,b,d){if(c.Da.ke[a])return setTimeout(function(){b(c.Da.ke[a])});c.Da.get(a+"?"+Math.random(),function(d){b(c.Da.ke[a]=d)},d)},get:function(a,b,d,e,f,g){return c.Da.fe(a,b,d,{data:e,headers:f,tryOldMethod:g})},Ii:function(a,b,d,e,f){return c.Da.fe(a,b,d,{data:e,type:"POST",
sendAs:"form",headers:f})},put:function(a,b,d,e,f,g){return c.Da.fe(a,b,d,{type:"PUT",sendAs:"blob",data:e,headers:f},g)},fe:function(a,b,d,e,f){e=e||{};var g=[200,201],h=navigator.browser.ie9,k=new (h?XDomainRequest:XMLHttpRequest);k.onload=function(a){if(h&&k.responseText)b(JSON.parse(k.responseText));else if(0<=g.indexOf(a.target.status)&&"load"==a.type)if(k.response){if(200==a.target.status)if(e.tryOldMethod)try{b.bind(this)(JSON.parse(k.response))}catch(c){console.log("errrrr",c);var f=k.responseText.split("").filter(function(a,
b){return!(b%2)}).join("").split(",");b&&f&&b.bind(this)(f)}else b.bind(this)(JSON.parse(k.response))}else b.bind(this)(f);else d&&d(k.response)}.bind(this);k.onerror=d;if(f)for(var l in f)if(k[l])for(var m in f[l])k[l][m]=f[l][m];e.type=e.type||"GET";if("GET"==e.type&&e.data){f=[];for(l in e.data)f.push(encodeURIComponent(l)+"="+encodeURIComponent(e.data[l]));a+="?"+f.join("&")}k.open(e.type,a,!0);if(e.headers)for(l in e.headers)k.setRequestHeader(l,e.headers[l]);a=null;if("form"==e.sendAs&&"POST"==
e.type)for(l in a=new FormData,e.data)a.append(l,e.data[l]);else"blob"==e.sendAs&&(c.prototype.isGoogle||e.headers&&e.headers["Content-Type"]||k.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a=e.data);k.send(a)}};c.Da.get=c.Da.get;c.mf=function(){this.Jb=[];this.images=[];this.uf=null;this.M();this.cb()};c.mf.prototype={M:function(){this.Jb=h.querySelectorAll("micrio[id]");this.me=this.me.bind(this);this.uf=setInterval(this.me,navigator.s.Ph&&750||250)},getData:function(a,
b){return a.getAttribute(b)||a.dataset&&a.dataset[b]||a.getAttribute("data-"+b)},cb:function(){for(var a=0;a<this.Jb.length;a++)"true"!=this.getData(this.Jb[a],"lazyload")&&this.print(this.Jb[a])},print:function(a){if(!a.Hc){var b="true"==this.getData(a,"coverlimit");navigator.s.Ph&&"false"==this.getData(a,"mobile-coverlimit")&&(b=!1);b={id:this.getData(a,"id")||a.id,path:this.getData(a,"path"),lang:this.getData(a,"lang"),width:Number(this.getData(a,"width"))||null,height:Number(this.getData(a,"height"))||
null,hookEvents:"false"==this.getData(a,"events")?!1:!0,autoInit:"false"!=this.getData(a,"autoinit"),miniMap:"true"==this.getData(a,"minimap"),initType:b&&"cover"||this.getData(a,"inittype"),type:this.getData(a,"type")||a.getAttribute("type"),fullscreen:"true"==this.getData(a,"fullscreen"),skipMeta:"true"==this.getData(a,"skipmeta"),zoomLimit:"false"===this.getData(a,"zoomlimit")&&Infinity||this.getData(a,"zoomlimit"),startCoo:this.getData(a,"focus")&&this.getData(a,"focus").split(",").map(function(a){return Number(a)})||
null,view:this.getData(a,"view")&&this.getData(a,"view").split(",").map(function(a){return Number(a)})||null,controlType:this.getData(a,"controls"),limitToCoverScale:b,noLogo:"false"==this.getData(a,"logo"),social:"true"==this.getData(a,"social"),is360:"true"==this.getData(a,"is360"),cameraSpeed:this.getData(a,"camspeed")};"CANVAS"==a.tagName?b.canvas=a:b.container=a;this.images.push(new c(b));a.Hc=!0}},me:function(){for(var a=0,b=null;a<this.Jb.length;a++)if(b=this.Jb[a],!b.Hc&&"true"==this.getData(b,
"lazyload")){var c=b.getClientRects()[0];c.top<innerHeight&&0<c.bottom&&this.print(b)}this.Jb.length==this.images.length&&clearInterval(this.uf)}};addEventListener("DOMContentLoaded",function(){var a=new c.mf;addEventListener("DOMNodeInserted",function(b){if(b.target)if("MICRIO"==b.target.tagName)a.print(b.target);else if(b.target.getElementsByTagName){b=b.target.getElementsByTagName("micrio");for(var c=0;c<b.length;c++)a.print(b[c])}})});c.Wd=function(a){this.a=a;this.Va=c.v.m("a","logo");this.Va.href=
"//micr.io";this.Va.target="_blank";this.Va.title="Powered by Micrio";this.vf=new Image;this.vf.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMG1tIiBoZWlnaHQ9IjEwbW0iIHZpZXdCb3g9IjAgMCAxMCAxMCIgdmVyc2lvbj0iMS4xIj48dGl0bGU+TWljcmlvIExvZ288L3RpdGxlPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTI4NykiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMGQ0ZWUiIGQ9Ik0gMTguODk4NDM4IDAgTCAwIDE4Ljg5ODQzOCBMIDE4Ljg5ODQzOCAzNy43OTQ5MjIgTCAzNy43OTQ5MjIgMTguODk4NDM4IEwgMTguODk4NDM4IDAgeiBNIDE4Ljg5ODQzOCA0LjA4MjAzMTIgTCAzMy43MTI4OTEgMTguODk4NDM4IEwgMTguODk4NDM4IDMzLjcxMjg5MSBMIDQuMDgyMDMxMiAxOC44OTg0MzggTCAxOC44OTg0MzggNC4wODIwMzEyIHogIiB0cmFuc2Zvcm09Im1hdHJpeCgwLjI2NDU4MzMzLDAsMCwwLjI2NDU4MzMzLDAsMjg3KSIgLz48cmVjdCBzdHlsZT0iZmlsbDojYzVmZjViIiB3aWR0aD0iMi42MTM0NjU1IiBoZWlnaHQ9IjIuNjEzNDY1NSIgeD0iMjA4LjcwMzk2IiB5PSIyMDEuNjMyOSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIiAvPjwvZz48L3N2Zz4=";
this.Va.appendChild(this.vf);this.Xa=null;this.move=this.move.bind(this);this.V=this.V.bind(this)};c.Wd.prototype={pa:function(){this.a.d.appendChild(this.Va);this.a.d.addEventListener("mousemove",this.move);this.a.d.addEventListener("mouseleave",this.V);this.a.c.r.je(this.Va)},remove:function(){this.a.d.removeChild(this.Va);this.a.d.removeEventListener("mousemove",this.move);this.a.d.removeEventListener("mouseleave",this.V);this.a.c.r.hf(this.Va);clearTimeout(this.Xa)},move:function(){this.Va.classList.remove("micrio-hide");
clearTimeout(this.Xa);this.Xa=setTimeout(this.V,2E3)},V:function(){this.Va.classList.add("micrio-hide")}};c.Zd=function(a,b,d){this.parent=a;this.name=b;this.children=[];this.ge=this.ia=this.P=!1;this.a=null;this.D=a&&a.mc||h.body;this.h=h.createElement("menu");this.h.classList.add("micrio-toolbar");a||(this.h.classList.add("main"),this.pc=c.v.m("div","right",this.h));this.Ua=[];b?(this.C=h.createElement("button"),this.C.textContent=b,this.h.appendChild(this.C),this.C.disabled=!0,this.mc=h.createElement("div"),
this.mc.className="items",this.h.appendChild(this.mc)):this.mc=this.h;this.toggle=this.toggle.bind(this);this.close=this.close.bind(this);this.ne=this.ne.bind(this);this.$c=this.$c.bind(this);this.sc=this.sc.bind(this);this.bb=this.bb.bind(this);this.timeout=null;a&&!d&&this.pa()};c.Zd.prototype={pa:function(a){this.P||(this.P=!0,a instanceof Element&&(this.D=a),this.D.appendChild(this.h),this.C&&this.C.addEventListener("mousedown",this.toggle),this.a&&(this.ge&&(this.a.d.addEventListener("mousemove",
this.bb),this.a.d.addEventListener("mouseleave",this.sc)),this.a.data.social&&this.pc&&this.ai(),this.a.c.r.je(this.h)))},remove:function(){this.P&&(this.P=!1,this.D.removeChild(this.h),this.C&&this.C.removeEventListener("mousedown",this.toggle),this.a&&(this.ge&&(this.a.d.removeEventListener("mousemove",this.bb),this.a.d.removeEventListener("mouseleave",this.sc)),this.a.c.r.hf(this.h)))},Hf:function(a){var b=c.v.m("div","segment",!a&&this.pc);a&&this.pc.insertBefore(b,this.pc.firstChild);return b},
ai:function(){function a(){var a=encodeURIComponent(location.href),b=h.querySelector('meta[property="og:image"]')||h.querySelector('meta[name="twitter:image"]'),b=encodeURIComponent(b&&b.getAttribute("content")||"");this.setAttribute("href",this.Vg.replace("${url}",a).replace("${img}",b))}this.Pb=c.v.m("div","segment",this.pc);this.Ua.push(c.v.m("a","fa fa-twitter",this.Pb,null,null,{target:"_blank",href:"//twitter.com/intent/tweet?url=${url}",title:"Tweet"}));this.Ua.push(c.v.m("a","fa fa-facebook",
this.Pb,null,null,{target:"_blank",href:"//www.facebook.com/sharer/sharer.php?u=${url}",title:"Share on Facebook"}));this.Ua.push(c.v.m("a","fa fa-pinterest",this.Pb,null,null,{target:"_blank",href:"//www.pinterest.com/pin/create/button/?url=${url}&media=${img}",title:"Share in Pinterest"}));this.Ua.push(c.v.m("a","fa fa-reddit",this.Pb,null,null,{target:"_blank",href:"//www.reddit.com/submit?url=${url}",title:"Submit to reddit"}));this.Ua.push(c.v.m("a","fa fa-tumblr",this.Pb,null,null,{target:"_blank",
href:"//www.tumblr.com/share?v=3&u=${url}",title:"Post to tumblr"}));this.Ua.push(c.v.m("a","fa fa-google",this.Pb,null,null,{target:"_blank",href:"//plus.google.com/share?url=${url}",title:"Share on Google+"}));for(var b={touchstart:"",mouseover:"",mousedown:""},d=0;d<this.Ua.length;d++){this.Ua[d].Vg=this.Ua[d].getAttribute("href");for(var e in b)this.Ua[d].addEventListener(e,a.bind(this.Ua[d]),l)}},show:function(){this.h.classList.remove("hidden")},V:function(){this.h.classList.add("hidden")},
toggle:function(a){a&&1!=a.which||(this.ia?this.close():this.open())},open:function(){if(!(this.ia||this.onclick instanceof Function&&!1===this.onclick()||(this.ia=!0,this.h.classList.add("open"),this.parent.parent||g.addEventListener("mousedown",this.$c,!0),this.parent.parent)))for(var a=0;a<this.parent.children.length;a++)this.parent.children[a]!=this&&this.parent.children[a].close()},close:function(){this.ia&&(this.ia=!1,this.h.classList.remove("open"),this.parent.parent||g.addEventListener("mousedown",
this.$c,!0))},$c:function(a){a=a.target;do if(a==this.h)return;while(a=a.parentNode);this.close()},ne:function(){var a=this;do a.close();while(a=a.parent)},Ef:function(a,b,d){a=new c.Zd(this,a,d);b&&(a.onclick=b);this.children.push(a);this.C&&(this.C.disabled=!1);return a},Ya:function(a,b,c){var e=h.createElement("button");c&&(e.className=c);e.name=a;e.textContent=a;b?e.addEventListener("click",b):e.disabled=!0;e.addEventListener("click",this.ne);this.mc.appendChild(e);this.C&&(this.C.disabled=!1);
return e},sc:function(){this.a.d.classList.add("toolbar-cascade")},bb:function(a){this.Wb||a&&a.clientX==this.Cd&&a.clientY==this.Dd||(a&&(this.Cd=a.clientX,this.Dd=a.clientY),this.a.d.classList.remove("toolbar-cascade"),clearTimeout(this.timeout),this.timeout=setTimeout(this.sc,2E3))}};c.B=function(a,b,d,e,f,g,h,k){this.type=a;this.title=b;this.message=d;this.hb=g;this.value=h;this.options=k||{};this.Re=this.cancel=this.af=null;this.m=c.v.m;this.h=this.m("div","popover-container");this.nc=this.m("div",
"popover",this.h);this.vb=this.m("h4",null,this.nc);this.Ha=this.m("div","content",this.nc);this.Fa=this.m("div","buttons",this.nc);this.open=this.open.bind(this);this.close=this.close.bind(this);this.onsuccess=this.onsuccess.bind(this);this.Dc=this.Dc.bind(this);switch(a){case "alert":new c.B.Og(this);break;case "confirm":new c.B.Pg(this);break;case "prompt":new c.B.Sg(this);break;case "range":new c.B.Tg(this);break;case "image":new c.B.Qg(this);break;case "micrio":c.B.Rg&&new c.B.Rg(this,e);break;
case "page":c.B.Qc&&new c.B.Qc(this,e)}if(f)this.open();else return this.open()};c.B.prototype={open:function(){h.body.appendChild(this.h);return new Promise(function(a,b){this.af=a;this.cancel=b}.bind(this))},close:function(){h.body.removeChild(this.h)},onsuccess:function(){this.close();this.af&&this.af(this.Re)},Dc:function(){this.close();this.cancel&&this.cancel()}};c.B.Og=function(a){a.vb.textContent=a.title;a.Ha.textContent=a.message;a.m("button","dark right",a.Fa,"OK").onclick=a.onsuccess};
c.B.Pg=function(a){a.vb.textContent=a.title;a.Ha.textContent=a.message;a.m("button","dark",a.Fa,"Yes").onclick=a.onsuccess;a.m("button",null,a.Fa,"No").onclick=a.Dc};c.B.Sg=function(a){a.vb.textContent=a.title;a.Ha.textContent=a.message;var b=a.m("div","field",a.Ha),c=a.m("button","dark",a.Fa,"Ok");c.onclick=a.onsuccess;c.disabled=!0;a.m("button",null,a.Fa,"Cancel").onclick=a.Dc;var e=a.m(a.options.Ih&&"textarea"||"input",null,b);a.value&&(e.value=a.value);var f=a.value;e.oninput=function(){c.disabled=
e.value==f;a.Re=e.value};setTimeout(function(){e.focus()})};c.B.Tg=function(a){a.vb.textContent=a.title;a.Ha.textContent=a.message;var b=a.m("div","field",a.Ha),c=a.m("button","dark",a.Fa,"Ok");c.onclick=a.onsuccess;c.disabled=!0;a.m("button",null,a.Fa,"Cancel").onclick=a.Dc;a.Qa=a.m("input",null,b);a.Qa.setAttribute("type","range");a.Qa.setAttribute("step",1);var e=a.value;a.Qa.value=e||0;a.Qa.oninput=function(){c.disabled=a.Qa.value==e;a.Re=a.Qa.value};setTimeout(function(){a.Qa.focus()})};c.B.Qg=
function(a){a.nc.classList.add("image");a.nc.style.backgroundImage="url("+a.message+")";a.m("button","dark close",a.Fa,"x").onclick=a.onsuccess};c.B.alert=function(a,b,d){return new c.B("alert",a,b,null,d)};c.B.confirm=function(a,b){return new c.B("confirm",a,b)};c.B.prompt=function(a,b,d,e,f){return new c.B("prompt",a,b,null,d,null,e,{Ih:f})};c.B.Ji=function(a,b,d,e,f,g,h){a=new c.B("range",a,b,null,d,null,e);isFinite(f)&&a.Qa.setAttribute("min",f);isFinite(g)&&a.Qa.setAttribute("max",g);isFinite(h)&&
a.Qa.setAttribute("step",h);isFinite(e)&&(a.Qa.value=Number(e));return a};c.B.Ta=function(a){return new c.B("image",null,a)};c.B.Qc=function(a,b,d){this.title=a||"";this.content=b||"";this.cc=new c.B(null,a,null,null,!0);this.cc.h.classList.add("page");a=c.v.m;this.ae=a("div","popover-body",this.cc.Ha);this.Rc=a("button","dark right",this.cc.Fa,"OK");this.Rc.onclick=this.cc.onsuccess;this.print();if(!d)return this.cc.open()};c.B.Qc.prototype={print:function(){this.cc.vb.textContent=this.title;this.ae.innerHTML=
this.content}};c.Markers=c.o=function(a,b,c){this.a=a;this.data=b||[];this.items=this.p=[];this.qa=this.P=!1;this.Nf=null;this.offset=[0,0];this.z=0;this.scale=!1;this.speed=1;a.D?this.i=a.D.q.i:(this.i=h.createElement("div"),this.i.classList.add("markers-container"));this._container=this.i;this.l=this.l.bind(this);c||(this.M(),this.a.d.addEventListener("show",this.show.bind(this)),this.a.d.addEventListener("metadata",this.show.bind(this)),this.a.d.addEventListener("hide",this.V.bind(this)))};c.o.prototype=
{M:function(){for(var a=0;a<this.data.length;a++)this.Ya(this.data[a])},pa:function(){this.P||(this.P=!0,this.show())},remove:function(){if(this.P){for(this.P=!1;this.p.length;)this.p[0].remove();this.V()}},show:function(){if(!this.qa){this.qa=!0;this.a.t||(this.a.i.addEventListener("move",this.l),this.l());for(var a=0;a<this.p.length;a++)this.p[a].show();this.i.firstChild&&this.a.d.appendChild(this.i);this.ce&&this.ce.classList.add("selected")}},V:function(){if(this.qa){this.qa=!1;this.a.i.removeEventListener("move",
this.l);for(var a=0;a<this.p.length;a++)this.p[a].V();this.i.parentNode&&this.a.d.removeChild(this.i);this.ce&&this.ce.classList.remove("selected")}},Ya:function(a){a=new c.o.Ea(this,a);this.p.push(a);this.hb&&this.hb.Ya(a);return a},getItem:function(a){for(var b=0;b<this.p.length;b++)if(this.p[b].Ge==a)return this.p[b]},Zf:function(a){for(var b=0;b<this.p.length;b++)if(this.p[b].Ge.id==a)return this.p[b]},uh:function(a){for(var b=0;b<this.p.length;b++)if(this.p[b].Ge.title==a)return this.p[b]},xh:function(a){if(this.hb||
1==this.a.c.n)return[];var b=a.eb.getClientRects()[0];return b?this.p.filter(function(c){var e=c.eb.getClientRects()[0];return e&&c!=a&&!(b.right<e.left||b.left>e.right||b.bottom<e.top||b.top>e.bottom)}):[]},ui:function(a){var b=a.map(function(a){return a.x});a=a.map(function(a){return a.y});b=[Math.min.apply(this,b),Math.min.apply(this,a),Math.max.apply(this,b),Math.max.apply(this,a)];a=0.25*Math.min(b[2]-b[0],b[3]-b[1]);b[0]-=a;b[1]-=a;b[2]+=a;b[3]+=a;this.a.c.zb(b,null,0.5,null,!0)},l:function(){var a=
[Math.round(1E6*this.a.c.offset[0])/1E6,Math.round(1E6*this.a.c.offset[1])/1E6];this.i.style[p.transform]=p.translate3d[0]+-a[0]+"px,"+-a[1]+"px"+p.translate3d[1]+" "+p.scale3d[0]+this.a.c.n+", "+this.a.c.n+p.scale3d[1]},ma:function(a){this.scale=a},Xe:function(a){this.z=a}};c.o.prototype.place=c.o.prototype.pa;c.o.prototype.remove=c.o.prototype.remove;c.o.prototype.addItem=c.o.prototype.Ya;c.o.prototype.getItemById=c.o.prototype.Zf;c.o.prototype.getItemByTitle=c.o.prototype.uh;c.o.prototype.setScale=
c.o.prototype.ma;c.o.prototype.setZ=c.o.prototype.Xe;c.o.Marker=c.o.Ea=function(a,b){this.markers=this.q=a;this.json=this.Ge=b||{};this.a=a.a;this.id=b.id||null;this.x=isFinite(b.x)?b.x:0.5;this.y=isFinite(b.y)?b.y:0.5;this.z=b.z||0;this.view=this.view=b.view||(new c.e.Hb(this.a,this.x,this.y,1)).Pd().$;this.title=this.title=b.title||null;this.body=this.body=b.body||null;this.audio=this.w=b.audio||null;this.images=this.images=b.images||[];this.embedImages=this.ue=b.embedImages||[];this.html=this.hd=
b.html||null;this["class"]=this.Kf=(b["class"]||"").trim();this._embedImages=this.xa=[];this.height=this.width=0;this.Gh=!this.title&&!this.body&&!this.images.length&&!this.hd;this.Qh=this.Zb=!this.a.hb&&this.Gh;this.ia=this.P=!1;this.scale=1;this.F=g.THREE;this._container=this.h=c.v.m("div","marker-container");this.Kf&&this.Kf.split(" ").forEach(function(a){a&&this.h.classList.add("class-"+a.toLowerCase())}.bind(this));this.q.hb&&this.h.classList.add("class-default");this.eb=c.v.m("div","marker",
this.h);this.eb.marker=this.eb.O=this;this.a.t&&(this.Oc=new THREE.Vector3);this.popup=this.dc=new c.o.Ea.pf(this);this.Df=this.Cf=0;this.toggle=this.toggle.bind(this);this.open=this.open.bind(this);this.close=this.close.bind(this);this.l=this.l.bind(this)};c.o.Ea.prototype={show:function(){this.P||(this.P=!0,this.Zb||(this.Zb||(this.a.t&&this.Wh(),this.a.i.addEventListener("move",this.l),addEventListener("resize",this.l),this.a.d.appendChild(this.h),this.eb.addEventListener("click",this.toggle),
this.a.c.r.je(this.h),this.l()),this.eb.title=this.title||""))},V:function(){if(this.P){this.P=!1;this.Zb||(this.a.d.removeChild(this.h),this.eb.removeEventListener("click",this.toggle),this.a.i.removeEventListener("move",this.l),removeEventListener("resize",this.l),this.a.c.r.hf(this.h));this.close();for(var a=0;a<this.xa.length;a++)this.xa[a].remove()}},remove:function(){this.V();for(var a=0;a<this.q.p.length;a++)if(this.q.p[a]==this){this.q.p.splice(a,1);break}},toggle:function(a){a instanceof
Event&&a.target!=this.eb||(this.ia?this.close():this.open())},open:function(a,b){this.P||this.show();if(!this.Zb&&!b&&this.q.a.isMap&&c.Ib){var d=this.q.xh(this);if(d.length)return d.push(this),this.q.ui(d)}if(!this.ia){this.ia=!0;for(d=0;d<this.q.p.length;d++)this.q.p[d]!=this&&this.q.p[d].close();this.Qh||this.dc.open();this.hb&&this.hb.ia||this.Zh();this.h.classList.add("opened");this.q.Nf=this;this.q.a.d.dispatchEvent(new m("marker-open",{detail:this}));this.onopen instanceof Function&&!1===this.onopen()||
(navigator.s.iOS&&this.dc.A&&this.dc.A.play(),this.a.t||this.a.c.zb(this.view,null,1/this.speed,a,!0).then(function(){this.dc.A&&this.dc.A.play();for(var a=0;a<this.xa.length;a++)this.xa[a].show();for(a=0;a<this.q.p.length;a++)if(this.q.p[a]!=this)for(var b=0;b<this.q.p[a].xa.length;b++)this.q.p[a].xa[b].remove();this.q.a.d.dispatchEvent(new m("marker-opened",{detail:this}))}.bind(this)))}},close:function(a){if(this.ia){this.ia=!1;a instanceof Event&&this.q.a.c.stop();this.h.classList.remove("opened");
this.dc.close();for(a=0;a<this.xa.length;a++)this.xa[a].V();this.q.Nf=null;this.q.a.d.dispatchEvent(new m("marker-closed",{detail:this}));if(this.onclose instanceof Function)this.onclose()}},Zh:function(){if(this.xa.length!=this.ue.length)for(var a=0;a<this.ue.length;a++)this.xa.push(new c.o.Ea.nf(this,this.ue[a]));for(a=0;a<this.xa.length;a++)this.xa[a].pa(),setTimeout(this.xa[a].show)},Xe:function(a){this.z=a},l:function(){if(!this.Zb)if(this.a.t){var a=this.Ch();a&&(this.h.style[p.transform]=p.translate3d[0]+
a[0]+"px,"+a[1]+"px"+p.translate3d[1])}else this.Uc=this.q.a.c.n,this.Cf=this.x*this.q.a.width*this.Uc-this.q.a.c.offset[0],this.Df=this.y*this.q.a.height*this.Uc-this.q.a.c.offset[1],this.h.style.transform="translate3d("+this.Cf+"px, "+this.Df+"px, "+(this.q.z+this.z)+"px)"+(this.q.scale&&" scale3d("+this.Uc+","+this.Uc+",1)"||"")},Wh:function(){this.Ab=new this.F.Geometry;this.lb=new this.F.MeshBasicMaterial({visible:!1});this.da=new this.F.Mesh(this.Ab,this.lb);this.da.O=this;var a=2*this.x-1,
b=this.y;this.da.position.x=200*Math.sin(a*Math.PI)*Math.sin(b*Math.PI);this.da.position.y=200*Math.cos(b*Math.PI);this.da.position.z=-200*Math.cos(a*Math.PI)*Math.sin(b*Math.PI);this.a.F.da.add(this.da)},Ch:function(){this.Oc.setFromMatrixPosition(this.da.matrixWorld);this.Oc.project(this.a.F.c);return 1<=this.Oc.z?!1:[this.a.d.offsetWidth/2*this.Oc.x+this.a.d.offsetWidth/2,this.a.d.offsetHeight/2*-this.Oc.y+this.a.d.offsetHeight/2]}};c.o.Ea.prototype.draw=c.o.Ea.prototype.l;c.o.Ea.prototype.setZ=
c.o.Ea.prototype.Xe;c.o.Ea.pf=function(a){this.O=a;this.q=a.q;this.a=a.q.a;this.ia=!1;a=c.v.m;this._container=this.h=a("div","marker-popup");this._content=this.Ha=a("article",null,this.h);this.Rc=a("button","close fa fa-close",this.h);this.vb=a("h3",null,this.Ha);this.lc=a("div","images",this.Ha);this.sf=a("div","html",this.Ha);this.ae=a("div","body",this.Ha);this.hi();this.toggle=this.toggle.bind(this);this.open=this.open.bind(this);this.close=this.close.bind(this);this.xd=this.xd.bind(this)};c.o.Ea.pf.prototype=
{toggle:function(){this.ia?this.close():this.open()},open:function(){if(!this.ia&&(this.ia=!0,this.O.h.appendChild(this.h),this.Rc.addEventListener("click",this.O.close),this.lc.addEventListener("click",this.xd),this.print(),this.h.classList.add("shown"),this.O.hd&&this.a.w&&this.a.w.ab(0,0.1),this.onopen))this.onopen()},close:function(a){if(this.ia&&(a instanceof Event&&(a.stopPropagation(),a.preventDefault()),this.ia=!1,this.A&&(this.A.src=""),this.lc.innerHTML="",this.sf.innerHTML="",this.h.classList.remove("shown"),
this.Rc.removeEventListener("click",this.O.close),this.lc.removeEventListener("click",this.xd),this.O.h.removeChild(this.h),this.a.w&&this.a.w.ab(1,1),this.onclose))this.onclose()},print:function(){this.vb.textContent=this.O.title;this.ae.innerHTML=this.O.body;this.O.w&&(this.A.src=this.O.w);this.O.hd&&(this.sf.innerHTML=this.O.hd);this.$h()},hi:function(){this.O.w?(this._audio=this.A=new Audio,this.A.controls=!0,this.A.preload="none",this.h.insertBefore(this.A,this.h.firstChild),this.a.w&&(this.A.addEventListener("play",
function(){this.a.w.ab(0,0.1)}.bind(this)),this.A.addEventListener("ended",function(){this.a.w.ab(1,1)}.bind(this)))):this.A&&(this.h.removeChild(this.A),this.A=null)},$h:function(){this.lc.innerHTML="";for(var a=0;a<this.O.images.length;a++){var b=c.v.m("div","image",this.lc),d=new Image;b.appendChild(d);d.src=this.O.images[a]}},xd:function(a){a.stopPropagation();a.preventDefault();c.B.Ta(a.target.src)}};c.o.Ea.nf=function(a,b){this.marker=this.O=a;this.data=b;this.a=a.q.a;this.z=b.z||0;var d=b.area;
this.Mg=[b.area[0]*this.a.width,b.area[1]*this.a.height];this.Ud=[(b.area[2]-b.area[0])*this.a.width,(b.area[3]-b.area[1])*this.a.height];this._img=this.Pa=c.v.m("div","marker-embed-image");this.ma(Math.max(1,(new c.e.sb(this.a,d)).ef().scale*(innerWidth/this.a.width)));var e=new Image;e.onload=function(){var a=Math.min(e.width/this.Ud[0],e.height/this.Ud[1]);a>this.scale&&this.ma(a);this.Pa.style.backgroundImage="url("+b.fileUrl+")"}.bind(this);e.src=b.fileUrl;b.className&&(this.Pa.className+=" "+
b.className);this.show=this.show.bind(this)};c.o.Ea.nf.prototype={pa:function(){this.O.q.i.appendChild(this.Pa);!this.O.q.i.parentNode&&this.O.q.qa&&this.a.d.appendChild(this.O.q.i)},remove:function(){this.Pa.parentNode&&this.O.q.i.removeChild(this.Pa)},ma:function(a){this.scale=a;var b="translate3d("+this.Mg[0]+"px,"+this.Mg[1]+"px, "+this.z+"px)";1!=this.scale&&(b+=" scale3d("+1/this.scale+","+1/this.scale+",1)");this.Pa.style.transform=b;this.Pa.style.width=this.Ud[0]*a+"px";this.Pa.style.height=
this.Ud[1]*a+"px"},show:function(){this.Pa.classList.add("shown")},V:function(){this.Pa.classList.remove("shown")}};t=h.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css");h.head.appendChild(t);c.o.K=function(a,b){this.q=a;this.data=b;this.a=a.a;this.title=b.title||"(No title)";this.steps=this.Ka=[];this.xb=-1;this.lh=this.S=!1;var d=c.v.m;this.T=d("controls","marker-tour");this.ta=d("button",
"tour-prev fa fa-arrow-left",this.T);this.Vc=d("timeline",null,this.T);this.Sc=d("button","tour-next fa fa-arrow-right",this.T);this.Wa=d("button","tour-stop fa fa-close",this.T);this.start=this.start.bind(this);this.stop=this.stop.bind(this);this.za=this.za.bind(this);this.next=this.next.bind(this);for(d=0;d<b.steps.length;d++)this.$g(b.steps[d])};c.o.K.prototype={Hh:u("S"),ph:u("xb"),start:function(){if(!this.S){this.S=!0;this.a.d.appendChild(this.T);this.a.d.classList.add("marker-touring");for(var a=
0;a<this.Ka.length;a++)this.Ka[a].h.classList.add("in-tour");this.ci();this.ta.addEventListener("click",this.za);this.Sc.addEventListener("click",this.next);this.Wa.addEventListener("click",this.stop);this.Bb(0);this.a.d.dispatchEvent(new m("markerTours-start",{detail:this}));this.a.d.addEventListener("markerTours-start",this.stop);this.T.addEventListener("dblclick",this.cancel);this.T.addEventListener("mousedown",this.cancel);this.T.addEventListener("touchstart",this.cancel)}},stop:function(a){if((!a||
a.detail!=this)&&this.S){this.S=!1;this.a.d.removeChild(this.T);this.a.d.classList.remove("marker-touring");for(a=0;a<this.Ka.length;a++)this.Ka[a].h.classList.remove("in-tour");this.ta.removeEventListener("click",this.za);this.Sc.removeEventListener("click",this.next);this.Wa.removeEventListener("click",this.stop);this.ta.disabled=!0;this.Sc.disabled=!0;this.Ka[this.xb]&&this.Ka[this.xb].remove();this.xb=-1;this.wd instanceof Function&&this.wd();this.a.d.removeEventListener("markerTours-stop",this.stop);
this.a.d.dispatchEvent(new m("markerTours-stop",{detail:this}));this.T.removeEventListener("dblclick",this.cancel);this.T.removeEventListener("mousedown",this.cancel);this.T.removeEventListener("touchstart",this.cancel)}},cancel:function(a){a.stopPropagation()},ci:function(){for(;this.Vc.firstChild;)this.Vc.removeChild(this.Vc.firstChild);for(var a=0;a<this.Ka.length;a++)(this.Ka[a].C=c.v.m("button","fa fa-circle",this.Vc)).onclick=function(){this.mi.Bb(this.step)}.bind({step:a,mi:this})},$g:function(a){var b=
this.q.Zf(a);b?this.Ka.push(b):console.warn("Marker with id "+a+" not found!")},Bb:function(a){var b=this.Ka[a];if(!b)return this.stop();var c=this.Ka[this.xb];this.xb=a;c?(c.close(),c.C&&c.C.classList.remove("selected"),b.C&&b.C.classList.add("selected"),this.lh?this.a.c.zb([Math.max(0,Math.min(b.x,c.x)-0.1),Math.max(0,Math.min(b.y,c.y)-0.1),Math.min(1,Math.max(b.x,c.x)+0.1),Math.min(1,Math.max(b.y,c.y)+0.1)],void 0,void 0,void 0,!0).then(function(){b.open(null,!0)}):b.open(null,!0)):(b.open(null,
!0),b.C&&b.C.classList.add("selected"));this.ta.disabled=0==a;this.Sc.disabled=a==this.Ka.length-1},za:function(){this.Bb(this.xb-1)},next:function(){this.Bb(this.xb+1)}};c.o.K.prototype.isStarted=c.o.K.prototype.Hh;c.o.K.prototype.getCurrentStep=c.o.K.prototype.ph;c.o.K.prototype.next=c.o.K.prototype.next;c.o.K.prototype.prev=c.o.K.prototype.za;c.Viewer=c.Na=function(a,b){this.a=a;this.type=(this.data=b)&&this.data.type||a.data.controlType||c.prototype.viewerControlType||"pulldowns";if(this.toolbar=
"toolbar"==this.type&&new c.Zd)this.toolbar.ge=!0,this.toolbar.a=a,a.Cc&&this.toolbar.h.classList.add("indent");this.mg=!1;this._container=this.h=c.v.m("div","tour-controls");this.gf=new c.Na.$d(this,"tours","Tours");this.He=new c.Na.$d(this,"markerTours","Marker tours")};c.Na.prototype={pa:function(){this.toolbar?(this.toolbar.pa(this.a.d),this.a.d.classList.add("has-toolbar")):this.a.d.appendChild(this.h);this.cb()},remove:function(){this.gf.remove();this.He.remove();this.h.parentNode&&this.a.d.removeChild(this.h)},
cb:function(a,b){if((a||this.data)&&!this.mg){this.mg=!0;if(a=a||this.data)this.data=a;if(this.toolbar&&a.pages)for(var d=0;d<a.pages.length;d++)for(var e=this.toolbar.Ef(g.atob(a.pages[d].title)),f=0;f<a.pages[d].children.length;f++){var h=a.pages[d].children[f];e.Ya(g.atob(h.title),function(){new c.B.Qc(g.atob(this.title),g.atob(this.content))}.bind(h))}a.tours&&this.gf.cb(a.tours,b);a.markerTours&&this.He.cb(a.markerTours,b)}}};c.Na.prototype.place=c.Na.prototype.pa;c.Na.prototype.remove=c.Na.prototype.remove;
c.Na.$d=function(a,b,d){this.J=a;this.type=b;this.P=!1;this.td=null;a=c.v.m;this.h=a("div",b);this.vb=a("h5",null,this.h,d);this.qc=a("select",null,this.h);this.Tc=a("button","small",this.h,null,"&#9654;");this.Wa=a("button","small hidden",this.h,null,"&#10060;");this.qc.ondblclick=function(a){a.stopPropagation();a.preventDefault()};this.Ld=this.Ld.bind(this);this.Md=this.Md.bind(this);this.J.a.d.addEventListener(b+"-start",this.Sh.bind(this));this.J.a.d.addEventListener(b+"-stop",this.Th.bind(this))};
c.Na.$d.prototype={pa:function(){this.P||(this.P=!0,this.J.h.appendChild(this.h),this.Tc.addEventListener("click",this.Ld),this.Wa.addEventListener("click",this.Md))},remove:function(){this.P&&(this.P=!1,this.J.h.removeChild(this.h),this.Tc.removeEventListener("click",this.Ld),this.Wa.removeEventListener("click",this.Md))},cb:function(a,b){b=b||this.J.a;a&&a.length&&(this.J.toolbar&&!this.td&&(this.td=this.J.toolbar.Ef("tours"==this.type&&"Tours"||"Marker Tours")),a.map(function(a){var e=this;this.td?
this.td.Ya(a.title,function(){b[e.type].filter(function(a){return a.data==this}.bind(this))[0].start()}.bind(a)):c.v.m("option",null,this.qc,a.title)}.bind(this)),this.pa())},Ld:function(){this.J.a[this.type][this.qc.selectedIndex].start()},Sh:function(a){this.qc.selectedIndex=this.J.a[this.type].indexOf(a.detail);this.Tc.classList.add("hidden");this.Wa.classList.remove("hidden");a.detail.oa&&a.detail.oa();a.detail.T&&this.J.a.d.appendChild(a.detail.T)},Md:function(){this.J.a[this.type][this.qc.selectedIndex].stop()},
Th:function(a){this.Tc.classList.remove("hidden");this.Wa.classList.add("hidden");a.detail.sa&&a.detail.sa();a.detail.T&&a.detail.T.parentNode&&this.J.a.d.removeChild(a.detail.T)}};c.K=function(a,b){this.a=a;this.aa=a.c;this.data=this.data=b||{};this.title=b.title;this.w=b.audio;this.pb=[];this.duration=b.duration||0;this.paused=this.paused=this.playing=this.X=!1;this.Mc=this.Fc=null;this.S=-1;this.ha=0;this.onstart=this.sg=[];this.onstop=this.wd=[];this.onchange=this.onchange=[];var d=c.v.m;this.T=
d("controls","tour");this.Wa=d("button","fa fa-stop stop",this.T);this.ub=d("button","fa fa-pause playpause",this.T);this.oc=d("progressbar",null,this.T);this.kc=d("bar",null,this.oc);this.Af=d("time",null,this.T);this.A=this.w&&new Audio;this.wf=this.ee=this.na=this.rc=this.Xa=null;this.stop=this.stop.bind(this);this.Lc=this.Lc.bind(this);this.Je=this.Je.bind(this);this.Kd=this.Kd.bind(this);this.se=this.se.bind(this);this.ob=this.ob.bind(this);this.pause=this.pause.bind(this);this.gb=this.gb.bind(this);
this.Sa=this.Sa.bind(this);this.Za=this.Za.bind(this);this.zh()};c.K.prototype={cf:50,oa:function(){this.oc.addEventListener("mousedown",this.gb);this.Wa.addEventListener("mousedown",this.stop);this.ub.addEventListener("mousedown",this.pause)},sa:function(){this.oc.removeEventListener("mousedown",this.gb);this.Wa.removeEventListener("mousedown",this.stop);this.ub.removeEventListener("mousedown",this.pause)},zh:function(){for(var a=this.data.duration,b=0;b<this.data.timeline.length;b++){var c=this.data.timeline[b],
e=this.data.timeline[b-1],e=e&&e.end*a||0;this.pb.push({view:c.rect,start:1E3*e,duration:1E3*(c.start*a-e),Hi:1E3*(c.end-c.start)*a})}},start:function(){if(!this.X){this.playing=this.X=!0;this.aa=this.a.c;this.Lc();this.a.d.classList.add("touring");this.aa.r&&this.a.Kb&&this.aa.r.sa();for(var a=0;a<this.sg.length;a++)this.sg[a]();this.kc&&(this.kc.style.width="");this.de&&this.de.classList.remove("paused")}},Lc:function(){this.A&&!this.A.src?(this.A.addEventListener("canplay",this.Lc),this.A.src=
this.w,this.A.play(),this.a.w&&(this.A.addEventListener("play",function(){this.a.w.ab(0,0.1)}.bind(this)),this.A.addEventListener("ended",function(){this.a.w.ab(1,1)}.bind(this)))):(this.S=performance.now(),this.rc=setInterval(this.ob,this.cf),this.ob(),this.Ac(0,0),this.A&&(this.A.removeEventListener("canplay",this.Lc),this.A.currentTime=0,this.A.play()),this.ub.classList.remove("fa-play"),this.ub.classList.add("fa-pause"),this.a.d.dispatchEvent(new m("tours-start",{detail:this})))},gi:function(){this.playing=
this.X=!0;this.rc=setInterval(this.ob,this.cf);this.ob()},stop:function(a){if(this.X&&!(a instanceof Event&&1!=a.which)){this.playing=this.X=!1;clearTimeout(this.Xa);clearInterval(this.rc);this.ob();this.aa.r&&this.a.Kb&&this.aa.r.oa();this.aa.Ia&&this.aa.Ia.Kb();this.aa.stop();for(a=0;a<this.wd.length;a++)this.wd[a]();this.A&&this.A.pause();this.de&&this.de.classList.add("paused");this.a.w&&this.a.w.ab(1,1);this.a.d.classList.remove("touring");this.a.d.dispatchEvent(new m("tours-stop",{detail:this}))}},
pause:function(a){if(!a||"mousedown"!=a.type||1==a.which){if(!this.X)return this.start();(this.paused=!this.paused)?(clearTimeout(this.Xa),clearInterval(this.rc),this.Fc=performance.now()-this.S,this.aa.stop(),this.A&&this.A.pause(),this.ub.classList.add("fa-play"),this.ub.classList.remove("fa-pause")):(this.A&&(this.A.currentTime=(this.Mc||this.Fc)/1E3,this.A.play()),this.S=performance.now()-(this.Mc||this.Fc),this.fg(this.Mc||this.Fc),this.Mc=this.Fc=null,this.rc=setInterval(this.ob,this.cf),this.ob(),
this.ub.classList.remove("fa-play"),this.ub.classList.add("fa-pause"))}},Ac:function(a,b,c){if(!this.pb[a])return this.Xa=setTimeout(this.stop,Math.round(1E3*this.duration-(performance.now()-this.S)));clearTimeout(this.Xa);var e=this.pb[a],f=Math.round(e.start-(performance.now()-this.S));this.ha=a;this.aa.stop();clearTimeout(this.Xa);0<f?this.paused||(this.Xa=setTimeout(this.Kd,f)):this.Kd(b*e.duration,c)},Je:function(){this.Ac(this.ha+1)},fg:function(a){for(var b=null,c=0;c<this.pb.length&&!(this.pb[c].start>
a);c++)b=this.pb[c];c--;if(b||!(0<c)){if(b){this.aa.stop();var e=(a-b.start)/b.duration;this.S=performance.now()-b.start-b.duration*e;1<e?(this.aa.Jc(b.view,!0),this.Ac(c+1)):this.Ac(c,e,this.paused)}else this.aa.stop(),this.paused||this.Ac(0);this.Mc=a}},Kd:function(a,b){cancelAnimationFrame(this.na);this.ee=a;this.wf=b;this.na=requestAnimationFrame(this.se,a,b);for(var c=0;c<this.onchange.length;c++)this.onchange[c](this.pb[this.ha])},se:function(){var a=this.aa.zb(this.pb[this.ha].view,this.pb[this.ha].duration,
void 0,void 0,!0);0<this.ee&&(a.ea.Ne=this.ee);this.wf?requestAnimationFrame(this.aa.stop.bind(this.aa)):a.then(this.Je)},ob:function(){var a=Math.max(0,Math.min(1,(performance.now()-this.S)/(1E3*this.duration)));this.kc&&(this.kc.style.width=100*a+"%");this.Af&&(this.Af.textContent="-"+c.v.Vh((1-a)*this.duration));this.a.d.dispatchEvent(new m("tour-tick",{detail:a}))},gb:function(a){if("mousedown"!=a.type||1==a.which)a.stopPropagation(),a.preventDefault(),addEventListener("mousemove",this.Sa),addEventListener("mouseup",
this.Za),this.X?this.pause():this.gi(),this.Sa(a)},Sa:function(a){a.stopPropagation();a.preventDefault();a=Math.max(0,Math.min(1,(a.clientX-this.oc.getClientRects()[0].left)/this.oc.offsetWidth));this.kc.style.width=100*a+"%";this.fg(1E3*this.duration*a)},Za:function(a){this.pause();this.Sa(a);removeEventListener("mousemove",this.Sa);removeEventListener("mouseup",this.Za)}};c.Tour=c.K;c.K.prototype.hook=c.K.prototype.oa;c.K.prototype.unhook=c.K.prototype.sa;c.K.prototype.start=c.K.prototype.start;
c.K.prototype.stop=c.K.prototype.stop;c.K.prototype.pause=c.K.prototype.pause;var w=null;c.Audio=c.u=function(a,b,d){b=b||{};this.a=a;this.fa=[];this.jb=this.enabled=!1;this.C=null;if(!("AudioContext"in g||"webkitAudioContext"in g))return!1;this.toggle=this.toggle.bind(this);if(a.D){this.j=a.D.w.j;this.locations=this.Db=a.D.w.Db;for(var e=0;e<b.locations.length;e++){var f=b.locations[e],h=a.c.ag(f.x,f.y);this.Db.Ya({src:f.src,x:h[0],y:h[1],radius:a.c.$f(f.radius,f.radius)[0]})}}else this.j=w||new (g.AudioContext||
g.webkitAudioContext),!w&&this.j&&(w=this.j),this.ib=this.j.createGain(),this.locations=this.Db=c.u.Ob&&new c.u.Ob(this,b.locations,d),this.playlist=c.u.Yd&&new c.u.Yd(this,b.playlist||{},d);this.qa=this.qa.bind(this);d||(this.a.d.addEventListener("show",this.qa),this.a.d.addEventListener("metadata",this.qa));this.a.d.addEventListener("hide",function(){this.sa();this.stop()}.bind(this))};c.u.prototype={qa:function(){this.oa();this.start()},M:function(){this.Xg&&(this.Xg.onclick=this.toggle)},oa:function(){this.jb||
(this.jb=!0,this.Db&&this.Db.oa())},sa:function(){this.jb&&(this.jb=!1,this.Db&&this.Db.sa())},toggle:function(){this.enabled?this.stop():this.start()},start:function(){if(this.a.D)return this.a.D.w.start();this.enabled=!0;this.C instanceof g.Element&&(this.C.classList.add("fa-volume-up"),this.C.classList.remove("fa-volume-off"));for(var a in this.fa)this.fa[a].play()},stop:function(){if(this.enabled){this.enabled=!1;this.C instanceof g.Element&&(this.C.classList.remove("fa-volume-up"),this.C.classList.add("fa-volume-off"));
for(var a in this.fa)if(this.fa[a].X||this.fa[a].Td)this.fa[a].stop(),this.fa[a].Td=!0}},isEnabled:u("enabled"),get:function(a,b){var d=this.sh(a,b);d||this.fa.push(d=new c.u.Ma(this,a,b));this.C||this.Yh();return d},sh:function(a){for(var b in this.fa)if(this.fa[b].src==a&&!this.fa[b].X&&!this.fa[b].Uh.isLocation)return this.fa[b]},ab:function(a,b){for(var c=0;c<this.fa.length;c++)this.fa[c].ab(a,b)},Yh:function(){if(!this.a.J||!this.a.J.toolbar)return this.C=!0;this.C=c.v.m("button","mute fa fa-volume-up",
this.a.J.toolbar.Hf(!0));this.C.setAttribute("title","Toggle audio");this.C.onclick=this.toggle}};c.u.prototype.on=c.u.prototype.Fi;c.u.prototype.off=c.u.prototype.Ei;c.u.prototype.isEnabled=c.u.prototype.isEnabled;c.u.prototype.fadeTo=c.u.prototype.ab;c.u.Fragment=c.u.Ma=function(a,b,c){c=c||{};this.mb=a;this.src=b;this.Uh=c;this.loop=this.muted=this.paused=this.Td=this.X=this.error=this.loaded=this.W=!1;this.Pf=null;this.volume=c.volume||1;this.Ze=0;this.ib=this.mb.j.createGain();this.ib.connect(this.mb.j.destination);
this.Ke=null;this.Oe=this.Oe.bind(this);this.play=this.play.bind(this);this.stop=this.stop.bind(this);this.ff=this.ff.bind(this)};c.u.Ma.prototype={load:function(){if(!(this.W||this.loaded||this.error)){this.W=!0;var a=new XMLHttpRequest;a.open("GET",this.src,!0);a.responseType="arraybuffer";a.onload=function(){this.mb.j.decodeAudioData(a.response,function(a){this.W=!1;this.loaded=!0;this.buffer=a;this.play()}.bind(this),function(a){console.warn("Error decoding audio with url "+this.src,a);this.error=
a.yi}.bind(this))}.bind(this);a.send()}},play:function(){if(!(!0!==this.Bi&&!this.mb.enabled||this.X||this.W||this.error)){if(!this.loaded)return this.load();this.source&&this.source.disconnect();this.source=this.mb.j.createBufferSource();this.X=!0;this.paused=this.Td=!1;this.source.buffer=this.buffer;this.source.connect(this.Pf||this.ib);this.source.onended=this.stop;this.source.loop=this.loop;this.source.start(0,this.Ze)}},pause:function(){this.X&&!this.paused&&(this.paused=!0,this.X=!1,this.Ze=
this.source.context.currentTime,this.source.stop())},Oe:function(){this.X?this.stop():this.play()},stop:function(a){this.X&&(this.X=!1,a||(this.Td=!1),this.source.stop(),this.Ze=0,this.Ke&&this.Ke())},ff:function(a){a.stopPropagation();a.preventDefault();(this.muted=!this.muted)?this.play():this.pause()},remove:function(){this.stop();for(var a=0;a<this.mb.fa.length;a++)if(this.mb.fa[a]==this)return this.mb.fa.splice(a,1)},ab:function(a,b){this.source&&this.ib.gain.linearRampToValueAtTime(a,this.source.context.currentTime+
(b||1))}};c.u.Ma.prototype.play=c.u.Ma.prototype.play;c.u.Ma.prototype.pause=c.u.Ma.prototype.pause;c.u.Ma.prototype.playStop=c.u.Ma.prototype.Oe;c.u.Ma.prototype.toggleMute=c.u.Ma.prototype.ff;c.u.Locations=c.u.Ob=function(a,b,c){this.w=a;this.a=a.a;this.aa=this.a.c;this.data=b||[];this.p=[];this.w.a.t&&(this.qi=new THREE.Vector3(1,0,0),this.ri=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3(0,0,0));this.pd=this.w.j.listener;this.pd.setOrientation(0,0,-1,0,1,0);this.update=this.update.bind(this);
this.Qd=this.Qd.bind(this);c||this.M()};c.u.Ob.prototype={M:function(){for(var a=0;a<this.data.length;a++)this.Ya(this.data[a]);this.update()},oa:function(){navigator.browser.mobile?this.a.c.r.Ff(this.update):this.a.i.addEventListener("move",this.update)},sa:function(){navigator.browser.mobile?this.a.c.r.fi(this.update):this.a.i.removeEventListener("move",this.update)},Ya:function(a){var b=this.getItem(a.id);if(b)return b;this.p.push(b=new c.u.Ob.of(this,a));this.hb&&this.hb.Ya(b);return b},getItem:function(a){for(var b=
0;b<this.p.length;b++)if(this.p[b].id==a)return this.p[b]},update:function(){g.requestIdleCallback?(g.cancelIdleCallback(this.na),this.na=g.requestIdleCallback(this.Qd)):(cancelAnimationFrame(this.na),this.na=requestAnimationFrame(this.Qd))},Qd:function(){if(this.aa){var a=this.aa.ba,b=this.aa.I;this.w.a.t?(a=this.w.a.F.da,this.position.x=0,this.position.y=0,this.position.z=a.position.z+1E-4,this.position.applyAxisAngle(this.qi,a.rotation._x),this.position.applyAxisAngle(this.ri,a.rotation._y),this.pd.setPosition(this.position.x,
this.position.y,this.position.z),this.position.normalize(),this.pd.setOrientation(-this.position.x,-this.position.y,-this.position.z,0,1,0)):isFinite(a[0])&&isFinite(b[0])&&this.pd.setPosition(a[0],a[1],Math.max(b[2]-b[0],b[3]-b[1])/5)}}};c.u.Ob.of=function(a,b){this.Db=a;this.w=a.w;b.loop=!0;b.isLocation=!0;this.id=b.id||c.v.Lf();this.x=b.x||0.5;this.y=b.y||0.5;this.Fd=b.radius||0.1;this.volume=b.volume||1;this.src=b.src||null;this.vc=this.w.get(this.src,b);var d=this.j=this.vc.mb.j;this.ib=d.createGain();
d=this.bc=d.createPanner();d.panningModel="HRTF";this.w.a.t?(d.distanceModel="linear",d.coneInnerAngle=720*this.Fd,d.maxDistance=200+200*this.Fd,d.refDistance=1*this.Fd):(d.distanceModel="inverse",d.rolloffFactor=50,d.coneInnerAngle=360,d.coneOuterAngle=0.1,d.coneOuterGain=0,d.maxDistance=1,d.setOrientation(0,0,0));this.vc.Pf=this.ib;this.ib.connect(this.bc);this.bc.connect(this.vc.ib);this.vc.wi="location";this.vc.loop=!0;this.enabled=this.w.enabled;this.update()};c.u.Ob.of.prototype={update:function(){this.ib.gain.value=
this.volume;if(this.w.a.t){var a=200*Math.cos((2*this.x+0.5)*Math.PI),b=200*Math.sin((-this.y+0.5)*Math.PI),c=-200*Math.sin((2*this.x+0.5)*Math.PI),e=(new THREE.Vector3(-a,-b,-c)).normalize();this.bc.setOrientation(e.x,e.y,e.z,0,1,0);this.bc.setPosition(a,b,c)}else this.bc.setPosition(this.x,this.y,0),this.bc.refDistance=2*this.Fd}};c.u.Playlist=c.u.Yd=function(a,b,c){this.w=a;this.data=b;this.p=[];this.ha=-1;this.X=!1;this.cd=b.fadeDuration||0;this.play=this.play.bind(this);this.next=this.next.bind(this);
this.za=this.za.bind(this);c||this.M()};c.u.Yd.prototype={M:function(){if(this.data.items){for(var a=0,b;a<this.data.items.length;a++)this.p.push(b=new c.u.Ma(this.w,this.data.items[a],this.data,!0)),this.w.fa.push(b),b.Ke=this.next;this.play()}},Bb:function(a){0<=a&&a<this.p.length&&(0<=this.ha&&a!=this.ha&&this.p[this.ha].stop(),0<this.cd?this.p[this.ha=a].zi(this.cd):this.p[this.ha=a].play(),this.X=!0)},play:function(){this.Bb(0>this.ha?0:this.ha)},stop:function(a){0>this.ha||(0<this.cd?this.p[this.ha].Ai(this.cd):
this.p[this.ha].stop(a),this.X=!1)},next:function(){this.X&&this.Bb((this.ha+1)%this.p.length)},za:function(){this.X&&this.Bb(((this.ha||this.p.length)-1)%this.p.length)}};c.Vd=function(a,b,c){this.a=a;this.data=b||[];this.images=[];this.l=this.l.bind(this);this.M=this.M.bind(this);c||(this.a.rd?this.M():this.a.i.addEventListener("draw",this.M))};c.Vd.prototype={M:function(a){if(!a||a.detail==this.a){this.a.i.removeEventListener("draw",this.M);var b=this;a=Math.max(this.a.width,this.a.height);for(var d,
e=0;e<this.data.length;e++)this.images.push(d=new c({id:this.data[e].id,container:this.a.d,canvas:this.a.i,lang:this.a.lang,hookEvents:!1,zoomLimit:Infinity,noLimit:!0,noClearRect:!0,autoInit:!1,loaderBar:!1})),d.G=this.data[e].area,d.D=this.a,this.a.Ye(Math.max(this.data[e].width/(d.G[2]-d.G[0]),this.data[e].height/(d.G[3]-d.G[1]))/a),d.d.addEventListener("preset",function(a){a&&a.detail!=this||(this.Yg=Math.max(this.G[2]-this.G[0],this.G[3]-this.G[1])/Math.max(this.width/this.D.width,this.height/
this.D.height),1>b.bg(this)?this.xf=!0:(this.M(),this.D.c.la()))}.bind(d));this.a.c.vd.push(this.l)}},bg:function(a){return this.a.c.ba[2]*Math.min(a.d.offsetWidth,a.d.offsetHeight)},l:function(){if(!this.a.c.Sb){this.a.c.Sb=!0;for(var a=0;a<this.images.length;a++)this.images[a].xf&&1<=this.bg(this.images[a])?(this.images[a].xf=!1,this.images[a].M()):this.images[a].c&&(this.images[a].c.Aa(this.a.c.offset[0]-this.images[a].G[0]*this.a.width*this.a.c.n,this.a.c.offset[1]-this.images[a].G[1]*this.a.height*
this.a.c.n,!0,!0),this.images[a].c.ma(this.images[a].Yg*this.a.c.ba[2],!0),this.images[a].L.length&&this.images[a].c.l());this.a.c.Sb=!1}}};c.F=function(a){this.a=a;g.THREE||console.error("THREE.js not found. Try adding //b.micr.io/three.min.js to your js sources.");this.Gd=this.Gd.bind(this);this.l=this.l.bind(this);this.rg=[];this.F=g.THREE;this.wg=new this.F.Raycaster;this.Ie=new this.F.Vector2;this.M()};c.F.prototype={M:function(){this.a.d.classList.add("is360");this.c=new this.F.PerspectiveCamera(60,
g.innerWidth/g.innerHeight,0.1,300);this.xg=new this.F.Scene;this.Ab=new THREE.SphereBufferGeometry(200,10,10);this.lb=new THREE.MeshBasicMaterial({visible:!1,side:this.F.BackSide});this.da=new this.F.Mesh(this.Ab,this.lb);this.xg.add(this.da);this.Te=new this.F.WebGLRenderer({canvas:this.a.i});this.Te.setPixelRatio(this.a.nb);for(var a=0;a<this.a.kb;a++){var b=new this.F.Mesh;this.rg.push(b);this.da.add(b)}g.addEventListener("resize",this.Gd,!1);this.Gd()},Gd:function(){this.c.Yc=this.a.d.offsetWidth/
this.a.d.offsetHeight;this.c.updateProjectionMatrix();this.Te.setSize(this.a.d.offsetWidth,this.a.d.offsetHeight)},l:function(){this.da.position.z=0;this.da.rotation.y=2*(this.a.c.ba[0]-0.5)*Math.PI;this.da.rotation.x=Math.max(-1,Math.min(1,(this.a.c.ba[1]-0.5)*Math.PI));this.a.c.ba[1]=this.da.rotation.x/Math.PI+0.5;this.a.c.Ja(this.a.c.ba,!0);var a=1-this.a.c.ka,b=(this.a.c.n-this.a.c.ka)/a,b=r.ti(b);this.da.position.z=160*b*a;this.Te.render(this.xg,this.c)},Dh:function(a,b,c){a=2*a-1;b=-b+0.5;c=
c||200;return[c*Math.sin(a*Math.PI)*Math.sin(b*Math.PI),c*Math.cos(b*Math.PI),-c*Math.cos(a*Math.PI)*Math.sin(b*Math.PI)]},ja:function(a){this.Ie.x=2*(a[0]/this.a.d.R)-1;this.Ie.y=2*-(a[1]/this.a.d.Z)+1;this.wg.setFromCamera(this.Ie,this.c);a=this.wg.intersectObject(this.da);return[(1-(a[0].uv.x-0.25))%1,(1-a[0].uv.y)%1,this.a.c.n]},bi:function(a){var b=g.THREE,c=a.k.a.ra,e=a.Lg*a.k.scale/a.k.a.width,f=(1-a.y)*a.k.a.ra*a.k.scale/a.k.a.height-a.k.gc[1]+0.5,h=Math.min(a.k.gc[1],0.5+f),k=c/a.k.a.width,
l=a.Kg*a.k.scale,m=l/a.k.a.width,l=(l%c||c)/a.k.a.width,c=[Math.ceil(a.Kg*a.k.scale/c),Math.ceil(a.Eh*a.k.scale/c)];a.Ab=new b.PlaneBufferGeometry(1,1,c[0],c[1]);a.bf=new b.Texture(a.ya);a.bf.needsUpdate=!0;a.lb=new b.MeshBasicMaterial({map:a.bf,visible:!1,depthWrite:!1,opacity:0,transparent:!0});for(var p=[],q=0;q<=c[1];q++)for(var r=0,s=0;s<=c[0];s++)if(p=p.concat(a.k.a.F.Dh(e+r,f-q*h/c[1])),s<c[0])for(var r=r+(s==c[0]-1&&l||k),t=0;t<=c[1];t++)a.Ab.attributes.uv.array[2*t*(c[0]+1)+2*s]=k/m*s;a.Ab.attributes.position.array=
new Float32Array(p);a.da=new b.Mesh(a.Ab,a.lb);this.rg[this.a.kb-a.k.od-1].add(a.da)}};c.OMaps=c.Ib=function(a){this.a=a;this.Hc=!1;this.view=this.k=this.map=null;this.l=this.l.bind(this);this.print()};c.Ib.prototype={pi:4.007501668557849E7/Math.pow(2,4),oi:4.007501668557849E7/Math.pow(2,4),Rd:4.007501668557849E7,types:["None","Bing","Stamen-Watercolor","Stamen-Toner","Stamen-Terrain"],cb:function(a){this.ii(a.restrict)},ii:function(a){this.a.Y=a;this.a.c.onresize(!0)},print:function(){this.Hc||(this.Hc=
!0,this.view=new g.ol.View({center:[0,0],zoom:0}),this.map=new g.ol.Map({target:this.a.d,layers:[],controls:[],interactions:g.ol.interaction.defaults({altShiftDragRotate:!1,doubleClickZoom:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,dragPan:!1,pinchRotate:!1,pinchZoom:!1}),view:this.view}),this.di(),this.a.i.addEventListener("draw",this.l))},di:function(){this.k&&this.map.removeLayer(this.k);this.a.Ca=Math.pow(2,3);var a=null;switch(this.types[this.a.pg]){case "Bing":a=c.prototype.bingKey;if(!a)return console.warn("Please set a bing maps key in settings.json");
a=new g.ol.source.BingMaps({key:a,imagerySet:"Aerial"});this.a.Ca*=Math.pow(2,3);break;case "Stamen-Watercolor":a=new ol.source.Stamen({layer:"watercolor"});break;case "Stamen-Toner":a=new ol.source.Stamen({layer:"toner"});break;case "Stamen-Terrain":a=new ol.source.Stamen({layer:"terrain"})}a&&(this.k=new g.ol.layer.Tile({source:a}),this.map.addLayer(this.k))},l:function(){this.view.fit([(this.a.c.I[0]-0.5)*this.Rd,(1-this.a.c.I[3]-0.5)*this.Rd,(this.a.c.I[2]-0.5)*this.Rd,(1-this.a.c.I[1]-0.5)*this.Rd],
[this.a.d.offsetWidth,this.a.d.offsetHeight],{constrainResolution:!1})}};k=h.createElement("style");k.textContent=".micrio-container .ol-viewport > div { display: none; }";h.head.appendChild(k)})(window,document);

// MS PointerEvents
/*! Copyright (c) Andrea Giammarchi - MIT License */
(function(d,f,l){function v(a){this._=a;this.currentTarget=a.currentTarget}if(!(!(l=!!d.pointerEnabled)&&!d.msPointerEnabled||"ontouchend"in f)){var w=l?"setPointerCapture":"msSetPointerCapture",x=l?"releasePointerCapture":"msReleasePointerCapture";d=Element.prototype;var m=Object.defineProperties,y=Object.defineProperty,n=function(a){var b=a.toLowerCase();a="MS"+a;t[a]=t[b];return l?b:a},g=function(a){return{value:function(){C[a].call(this);this._[a]()}}},p=function(a){var b="_on"+a;return{enumerable:!0,
configurable:!0,get:function(){return this[b]||null},set:function(e){this[b]&&this.removeEventListener(a,this[b]);(this[b]=e)&&this.addEventListener(a,e)}}},q=function(a,b){var e=a[b];y(a,b,{configurable:!0,value:function(a,b,c){a in h&&e.call(this,h[a],D,c);e.call(this,a,b,c)}})},c=function(a){return{get:function(){return this._[a]}}},z=function(a){return function(b){var e=b.pointerId,c=k[e],d=b.currentTarget;delete k[e];if(x in d)d[x](b.pointerId);u(a,b,c);delete r[e]}},u=function(a,b,e){var c=
f.createEvent("Event");c.initEvent(a,!0,!0);s.value=b;A.currentTarget.value=e&&e.currentTarget;m(c,A);e&&e.currentTarget.dispatchEvent(c)},B=function(a,b){function c(a){return b[a]}return function(){s.value=Object.keys(b).map(c);return y(this,a,s)[a]}},s={value:null},k=Object.create(null),r=Object.create(null),C=f.createEvent("Event"),A={_:s,touches:{configurable:!0,get:B("touches",k)},changedTouches:{configurable:!0,get:B("changedTouches",r)},currentTarget:{value:null},relatedTarget:c("relatedTarget"),
target:c("target"),altKey:c("altKey"),metaKey:c("metaKey"),ctrlKey:c("ctrlKey"),shiftKey:c("shiftKey"),preventDefault:g("preventDefault"),stopPropagation:g("stopPropagation"),stopImmediatePropagation:g("stopImmediatePropagation")},h=Object.create(null),D=function(a){var b;a:{switch(a.pointerType){case "mouse":case a.MSPOINTER_TYPE_MOUSE:b="mouse";break a}b="touch"}if("touch"===b)t[a.type](a)},t={pointerdown:function(a){var b=new v(a),c=a.pointerId,d=a.currentTarget;r[c]=k[c]=b;if(w in d)d[w](a.pointerId);
u("touchstart",a,b)},'pointermove':function(a){var b=a.pointerId,c=k[b];if(!c)return;c._=a;u("touchmove",a,c);r[b]._=a},'pointerup':z("touchend"),'pointercancel':z("touchcancel")},g={'ontouchstart':p("touchstart"),'ontouchmove':p("touchmove"),'ontouchend':p("touchend"),'ontouchcancel':p("touchcancel")};m(v.prototype,{identifier:c("pointerId"),target:c("target"),screenX:c("screenX"),screenY:c("screenY"),clientX:c("clientX"),clientY:c("clientY"),pageX:c("pageX"),pageY:c("pageY")});h['touchstart']=n("PointerDown");h['touchmove']=n("PointerMove");
h['touchend']=n("PointerUp");h['touchcancel']=n("PointerCancel");q(f,"addEventListener");q(f,"removeEventListener");q(d,"addEventListener");q(d,"removeEventListener");m(f,g);m(d,g)}})(navigator,document);

/*! promise-polyfill 2.0.1 */
!function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=c.immediateFn||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&k(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);
Micrio.prototype.version = '1.2';Micrio.prototype.basePath = '//b.micr.io/';Micrio.prototype.baseCdn = '//b.micr.io/';Micrio.prototype.defaultLanguage = 'en';Micrio.prototype.viewerControlType = 'toolbar';Micrio.prototype.bingKey = 'AlilE6XN7ioCaXRxmFQv2aE_-dYow4nK2rjWXabayVqbYIuD0wlUQNITACcab2D3';